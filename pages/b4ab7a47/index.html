<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/uploads/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/uploads/favicon.ico">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"dunwu.github.io","root":"/blog/","images":"/blog/images","scheme":"Pisces","darkmode":true,"version":"8.25.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"atom-one-light","dark":"atom-one-dark"},"prism":{"light":"atom-one-light","dark":"atom-one-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src="/blog/js/config.js" defer></script>

    <meta name="description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以 &lt;% 开头以 %&gt; 结束。 JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb 之 Jsp 指南">
<meta property="og:url" content="https://dunwu.github.io/blog/pages/b4ab7a47/index.html">
<meta property="og:site_name" content="Dunwu Blog">
<meta property="og:description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以 &lt;% 开头以 %&gt; 结束。 JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg">
<meta property="article:published_time" content="2020-02-07T15:04:47.000Z">
<meta property="article:modified_time" content="2025-09-13T09:56:53.707Z">
<meta property="article:author" content="钝悟 ◾ Dunwu">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JavaWeb">
<meta property="article:tag" content="JSP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg">


<link rel="canonical" href="https://dunwu.github.io/blog/pages/b4ab7a47/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://dunwu.github.io/blog/pages/b4ab7a47/","path":"/pages/b4ab7a47/","title":"JavaWeb 之 Jsp 指南"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>JavaWeb 之 Jsp 指南 | Dunwu Blog</title>
  








  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/blog/js/utils.js" defer></script><script src="/blog/js/motion.js" defer></script><script src="/blog/js/sidebar.js" defer></script><script src="/blog/js/next-boot.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.5.0/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/blog/js/third-party/search/local-search.js" defer></script>





  <script src="/blog/js/third-party/pace.js" defer></script>


  





  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Dunwu Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">大道至简，知易行难</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">428</span></a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">124</span></a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">508</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaWeb-%E4%B9%8B-Jsp-%E6%8C%87%E5%8D%97"><span class="nav-number">1.</span> <span class="nav-text">JavaWeb 之 Jsp 指南</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Java-Server-Pages"><span class="nav-number">1.1.1.</span> <span class="nav-text">什么是 Java Server Pages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-JSP"><span class="nav-number">1.1.2.</span> <span class="nav-text">为什么使用 JSP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">1.1.3.</span> <span class="nav-text">JSP 的优势</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.2.</span> <span class="nav-text">JSP 工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">1.2.1.</span> <span class="nav-text">JSP 工作流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">工作步骤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.2.2.</span> <span class="nav-text">JSP 生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JSP-%E7%BC%96%E8%AF%91"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">JSP 编译</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSP-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">JSP 初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSP-%E6%89%A7%E8%A1%8C"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">JSP 执行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSP-%E6%B8%85%E7%90%86"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">JSP 清理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">1.3.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC"><span class="nav-number">1.3.1.</span> <span class="nav-text">脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">中文编码问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E5%A3%B0%E6%98%8E"><span class="nav-number">1.3.2.</span> <span class="nav-text">JSP 声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.3.3.</span> <span class="nav-text">JSP 表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E6%B3%A8%E9%87%8A"><span class="nav-number">1.3.4.</span> <span class="nav-text">JSP 注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.5.</span> <span class="nav-text">控制语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if%E2%80%A6else-%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">if…else 语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#switch%E2%80%A6case-%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">switch…case 语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.5.3.</span> <span class="nav-text">循环语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-number">1.3.6.</span> <span class="nav-text">JSP 字面量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4"><span class="nav-number">1.4.</span> <span class="nav-text">指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Page-%E6%8C%87%E4%BB%A4"><span class="nav-number">1.4.1.</span> <span class="nav-text">Page 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Include-%E6%8C%87%E4%BB%A4"><span class="nav-number">1.4.2.</span> <span class="nav-text">Include 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Taglib-%E6%8C%87%E4%BB%A4"><span class="nav-number">1.4.3.</span> <span class="nav-text">Taglib 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E5%8A%A8%E4%BD%9C%E5%85%83%E7%B4%A0"><span class="nav-number">1.5.</span> <span class="nav-text">JSP 动作元素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">1.5.1.</span> <span class="nav-text">常见的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">1.5.2.</span> <span class="nav-text">&lt;jsp:include&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-1"><span class="nav-number">1.5.3.</span> <span class="nav-text">&lt;jsp:useBean&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-2"><span class="nav-number">1.5.4.</span> <span class="nav-text">&lt;jsp:setProperty&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-3"><span class="nav-number">1.5.5.</span> <span class="nav-text">&lt;jsp:getProperty&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-4"><span class="nav-number">1.5.6.</span> <span class="nav-text">&lt;jsp:forward&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-5"><span class="nav-number">1.5.7.</span> <span class="nav-text">&lt;jsp:plugin&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%81-%E3%80%81"><span class="nav-number">1.5.8.</span> <span class="nav-text">&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-6"><span class="nav-number">1.5.9.</span> <span class="nav-text">&lt;jsp:text&gt;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.</span> <span class="nav-text">JSP 隐式对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#request-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.1.</span> <span class="nav-text">request 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#response-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.2.</span> <span class="nav-text">response 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#out-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.3.</span> <span class="nav-text">out 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#session-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.4.</span> <span class="nav-text">session 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#application-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.5.</span> <span class="nav-text">application 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#config-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.6.</span> <span class="nav-text">config 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.7.</span> <span class="nav-text">pageContext 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#page-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.8.</span> <span class="nav-text">page 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exception-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.6.9.</span> <span class="nav-text">exception 对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.7.</span> <span class="nav-text">EL 表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.1.</span> <span class="nav-text">一个简单的语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EL-%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.7.2.</span> <span class="nav-text">EL 中的基础操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-EL-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">1.7.3.</span> <span class="nav-text">JSP EL 中的函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-EL-%E9%9A%90%E5%90%AB%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.7.4.</span> <span class="nav-text">JSP EL 隐含对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext-%E5%AF%B9%E8%B1%A1-1"><span class="nav-number">1.7.5.</span> <span class="nav-text">pageContext 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scope-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.7.6.</span> <span class="nav-text">Scope 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#param-%E5%92%8C-paramValues-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.7.7.</span> <span class="nav-text">param 和 paramValues 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#header-%E5%92%8C-headerValues-%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.7.8.</span> <span class="nav-text">header 和 headerValues 对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSTL"><span class="nav-number">1.8.</span> <span class="nav-text">JSTL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSTL-%E5%BA%93%E5%AE%89%E8%A3%85"><span class="nav-number">1.8.1.</span> <span class="nav-text">JSTL 库安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE"><span class="nav-number">1.8.2.</span> <span class="nav-text">核心标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE"><span class="nav-number">1.8.3.</span> <span class="nav-text">格式化标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL-%E6%A0%87%E7%AD%BE"><span class="nav-number">1.8.4.</span> <span class="nav-text">SQL 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML-%E6%A0%87%E7%AD%BE"><span class="nav-number">1.8.5.</span> <span class="nav-text">XML 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSTL-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.6.</span> <span class="nav-text">JSTL 函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Taglib"><span class="nav-number">1.9.</span> <span class="nav-text">Taglib</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="nav-number">1.9.1.</span> <span class="nav-text">JSP 自定义标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E2%80%9DHello%E2%80%9D%E6%A0%87%E7%AD%BE"><span class="nav-number">1.9.2.</span> <span class="nav-text">创建”Hello”标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E7%AD%BE%E4%BD%93"><span class="nav-number">1.9.3.</span> <span class="nav-text">访问标签体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7"><span class="nav-number">1.9.4.</span> <span class="nav-text">自定义标签属性</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="钝悟 ◾ Dunwu"
      src="/blog/uploads/avatar.gif">
  <p class="site-author-name" itemprop="name">钝悟 ◾ Dunwu</p>
  <div class="site-description" itemprop="description">钝悟的个人博客</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">508</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">124</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">428</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/dunwu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;dunwu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:forbreak@163.com" title="E-Mail → mailto:forbreak@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/b4ab7a47/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="钝悟 ◾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="钝悟的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="JavaWeb 之 Jsp 指南 | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaWeb 之 Jsp 指南<a href="https://github.com/dunwu/blog/blob/master/source/_posts/01.Java/02.JavaEE/01.JavaWeb/02.JavaWeb%E4%B9%8BJsp%E6%8C%87%E5%8D%97.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-07 23:04:47" itemprop="dateCreated datePublished" datetime="2020-02-07T23:04:47+08:00">2020-02-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-13 17:56:53" itemprop="dateModified" datetime="2025-09-13T17:56:53+08:00">2025-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaEE/" itemprop="url" rel="index"><span itemprop="name">JavaEE</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaEE/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>35k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>32 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="JavaWeb-之-Jsp-指南"><a href="#JavaWeb-之-Jsp-指南" class="headerlink" title="JavaWeb 之 Jsp 指南"></a>JavaWeb 之 Jsp 指南</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="什么是-Java-Server-Pages"><a href="#什么是-Java-Server-Pages" class="headerlink" title="什么是 Java Server Pages"></a>什么是 Java Server Pages</h3><p><code>JSP</code>全称<code>Java Server Pages</code>，是一种动态网页开发技术。</p>
<p>它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以 <code>&lt;%</code> 开头以 <code>%&gt;</code> 结束。</p>
<p>JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTML 代码、XML 元素以及嵌入 JSP 操作和命令来编写 JSP。</p>
<p>JSP 通过网页表单获取用户输入数据、访问数据库及其他数据源，然后动态地创建网页。</p>
<p>JSP 标签有多种功能，比如访问数据库、记录用户选择信息、访问 JavaBeans 组件等，还可以在不同的网页中传递控制信息和共享信息。</p>
<h3 id="为什么使用-JSP"><a href="#为什么使用-JSP" class="headerlink" title="为什么使用 JSP"></a>为什么使用 JSP</h3><p>JSP 也是一种 Servlet，因此 JSP 能够完成 Servlet 能完成的任何工作。</p>
<p>JSP 程序与 CGI 程序有着相似的功能，但和 CGI 程序相比，JSP 程序有如下优势：</p>
<ul>
<li>性能更加优越，因为 JSP 可以直接在 HTML 网页中动态嵌入元素而不需要单独引用 CGI 文件。</li>
<li>服务器调用的是已经编译好的 JSP 文件，而不像 CGI&#x2F;Perl 那样必须先载入解释器和目标脚本。</li>
<li>JSP 基于 Java Servlets API，因此，JSP 拥有各种强大的企业级 Java API，包括 JDBC，JNDI，EJB，JAXP 等等。</li>
<li>JSP 页面可以与处理业务逻辑的 servlets 一起使用，这种模式被 Java servlet 模板引擎所支持。</li>
</ul>
<p>最后，JSP 是 Java EE 不可或缺的一部分，是一个完整的企业级应用平台。这意味着 JSP 可以用最简单的方式来实现最复杂的应用。</p>
<h3 id="JSP-的优势"><a href="#JSP-的优势" class="headerlink" title="JSP 的优势"></a>JSP 的优势</h3><p>以下列出了使用 JSP 带来的其他好处：</p>
<ul>
<li>与 ASP 相比：JSP 有两大优势。首先，动态部分用 Java 编写，而不是 VB 或其他 MS 专用语言，所以更加强大与易用。第二点就是 JSP 易于移植到非 MS 平台上。</li>
<li>与纯 Servlets 相比：JSP 可以很方便的编写或者修改 HTML 网页而不用去面对大量的 println 语句。</li>
<li>与 SSI 相比：SSI 无法使用表单数据、无法进行数据库链接。</li>
<li>与 JavaScript 相比：虽然 JavaScript 可以在客户端动态生成 HTML，但是很难与服务器交互，因此不能提供复杂的服务，比如访问数据库和图像处理等等。</li>
<li>与静态 HTML 相比：静态 HTML 不包含动态信息。</li>
</ul>
<h2 id="JSP-工作原理"><a href="#JSP-工作原理" class="headerlink" title="JSP 工作原理"></a>JSP 工作原理</h2><p><strong>JSP 是一种 Servlet</strong>，但工作方式和 Servlet 有所差别。</p>
<p>Servlet 是先将源代码编译为 class 文件后部署到服务器下的，<strong>先编译后部署</strong>。</p>
<p>Jsp 是先将源代码部署到服务器再编译，<strong>先部署后编译</strong>。</p>
<p>Jsp 会在客户端第一次请求 Jsp 文件时被编译为 HttpJspPage 类（Servlet 的一个子类）。该类会被服务器临时存放在服务器工作目录里。所以，第一次请求 Jsp 后，访问速度会变快就是这个道理。</p>
<h3 id="JSP-工作流程"><a href="#JSP-工作流程" class="headerlink" title="JSP 工作流程"></a>JSP 工作流程</h3><p>网络服务器需要一个 JSP 引擎，也就是一个容器来处理 JSP 页面。容器负责截获对 JSP 页面的请求。本教程使用内嵌 JSP 容器的 Apache 来支持 JSP 开发。</p>
<p>JSP 容器与 Web 服务器协同合作，为 JSP 的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素。</p>
<p>下图显示了 JSP 容器和 JSP 文件在 Web 应用中所处的位置。</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg" alt="img"></p>
<h4 id="工作步骤"><a href="#工作步骤" class="headerlink" title="工作步骤"></a>工作步骤</h4><p>以下步骤表明了 Web 服务器是如何使用 JSP 来创建网页的：</p>
<ul>
<li>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。</li>
<li>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用 URL 或者.jsp 文件来完成。</li>
<li>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 servlet。这种转化只是简单地将所有模板文本改用 println()语句，并且将所有的 JSP 元素转化成 Java 代码。</li>
<li>JSP 引擎将 servlet 编译成可执行类，并且将原始请求传递给 servlet 引擎。</li>
<li>Web 服务器的某组件将会调用 servlet 引擎，然后载入并执行 servlet 类。在执行过程中，servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</li>
<li>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。</li>
<li>最终，Web 浏览器处理 HTTP response 中动态产生的 HTML 网页，就好像在处理静态网页一样。</li>
</ul>
<p>以上提及到的步骤可以用下图来表示：</p>
<p>一般情况下，JSP 引擎会检查 JSP 文件对应的 servlet 是否已经存在，并且检查 JSP 文件的修改日期是否早于 servlet。如果 JSP 文件的修改日期早于对应的 servlet，那么容器就可以确定 JSP 文件没有被修改过并且 servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。</p>
<h3 id="JSP-生命周期"><a href="#JSP-生命周期" class="headerlink" title="JSP 生命周期"></a>JSP 生命周期</h3><p>理解 JSP 底层功能的关键就是去理解它们所遵守的生命周期。</p>
<p>JSP 生命周期就是从创建到销毁的整个过程，类似于 servlet 生命周期，区别在于 JSP 生命周期还包括将 JSP 文件编译成 servlet。</p>
<p>以下是 JSP 生命周期中所走过的几个阶段：</p>
<ul>
<li><strong>编译阶段：</strong>servlet 容器编译 servlet 源文件，生成 servlet 类</li>
<li><strong>初始化阶段：</strong>加载与 JSP 对应的 servlet 类，创建其实例，并调用它的初始化方法</li>
<li><strong>执行阶段：</strong>调用与 JSP 对应的 servlet 实例的服务方法</li>
<li><strong>销毁阶段：</strong>调用与 JSP 对应的 servlet 实例的销毁方法，然后销毁 servlet 实例</li>
</ul>
<p>很明显，JSP 生命周期的四个主要阶段和 servlet 生命周期非常相似，下面给出图示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg" alt="img"></p>
<h4 id="JSP-编译"><a href="#JSP-编译" class="headerlink" title="JSP 编译"></a>JSP 编译</h4><p>当浏览器请求 JSP 页面时，JSP 引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个 JSP 文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析 JSP 文件。</li>
<li>将 JSP 文件转为 servlet。</li>
<li>编译 servlet。</li>
</ul>
<h4 id="JSP-初始化"><a href="#JSP-初始化" class="headerlink" title="JSP 初始化"></a>JSP 初始化</h4><p>容器载入 JSP 文件后，它会在为请求提供任何服务前调用 jspInit()方法。如果您需要执行自定义的 JSP 初始化任务，复写 jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">jspInit</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一般来讲程序只初始化一次，servlet 也是如此。通常情况下您可以在 jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<h4 id="JSP-执行"><a href="#JSP-执行" class="headerlink" title="JSP 执行"></a>JSP 执行</h4><p>这一阶段描述了 JSP 生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当 JSP 网页完成初始化后，JSP 引擎将会调用 <code>_jspService()</code> 方法。</p>
<p><code>_jspService()</code> 方法需要一个 HttpServletRequest 对象和一个 HttpServletResponse 对象作为它的参数，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">_jspService</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                 HttpServletResponse response)</span> &#123;</span><br><span class="line">   <span class="comment">// 服务端处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>_jspService()</code> 方法在每个 request 中被调用一次并且负责产生与之相对应的 response，并且它还负责产生所有 7 个 HTTP 方法的回应，比如 GET、POST、DELETE 等等。</p>
<h4 id="JSP-清理"><a href="#JSP-清理" class="headerlink" title="JSP 清理"></a>JSP 清理</h4><p>JSP 生命周期的销毁阶段描述了当一个 JSP 网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在 JSP 中等价于 servlet 中的销毁方法。当您需要执行任何清理工作时复写 jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">jspDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>脚本程序可以包含任意量的 Java 语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>脚本程序的语法格式：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;% 代码片段 %&gt;</span></span><br></pre></td></tr></table></figure>

<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:scriptlet</span>&gt;</span></span><br><span class="line">  代码片段</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:scriptlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>任何文本、HTML 标签、JSP 元素必须写在脚本程序的外面。</p>
<p>下面给出一个示例，同时也是本教程的第一个 JSP 示例：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Hello World!<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="language-vbscript">&lt;% out.println(<span class="string">&quot;Your IP address is &quot;</span> + <span class="built_in">request</span>.getRemoteAddr()); %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>请确保 Apache Tomcat 已经安装在 C:\apache-tomcat-7.0.2 目录下并且运行环境已经正确设置。</p>
<p>将以上代码保存在 hello.jsp 中，然后将它放置在 C:\apache-tomcat-7.0.2\webapps\ROOT 目录下，打开浏览器并在地址栏中输入 <code>http://localhost:8080/hello.jsp</code> 。运行后得到以下结果：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg" alt="img"></p>
<h4 id="中文编码问题"><a href="#中文编码问题" class="headerlink" title="中文编码问题"></a>中文编码问题</h4><p>如果我们要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：<code>&lt;&gt;</code></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@<span class="built_in"> page </span><span class="attribute">language</span>=<span class="string">&quot;java&quot;</span> <span class="attribute">contentType</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line"><span class="attribute">pageEncoding</span>=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>

<p>接下来我们将以上程序修改为：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-vbscript">pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Hello World!<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="language-vbscript">&lt;% out.println(<span class="string">&quot;你的 IP 地址 &quot;</span> + <span class="built_in">request</span>.getRemoteAddr()); %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>这样中文就可以正常显示了。</p>
<h3 id="JSP-声明"><a href="#JSP-声明" class="headerlink" title="JSP 声明"></a>JSP 声明</h3><p>一个声明语句可以声明一个或多个变量、方法，供后面的 Java 代码使用。在 JSP 文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>JSP 声明的语法格式：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! declaration; [ declaration; ]+ ... %&gt;</span><br></pre></td></tr></table></figure>

<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:declaration</span>&gt;</span></span><br><span class="line">  代码片段</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:declaration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>程序示例：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> i = <span class="number">0</span>; %&gt; &lt;%! <span class="keyword">int</span> a, b, c; %&gt; &lt;%! Circle a = new Circle(<span class="number">2.0</span>); %&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JSP-表达式"><a href="#JSP-表达式" class="headerlink" title="JSP 表达式"></a>JSP 表达式</h3><p>一个 JSP 表达式中包含的脚本语言表达式，先被转化成 String，然后插入到表达式出现的地方。</p>
<p>由于表达式的值会被转化成 String，所以您可以在一个文本行中使用表达式而不用去管它是否是 HTML 标签。</p>
<p>表达式元素中可以包含任何符合 Java 语言规范的表达式，但是不能使用分号来结束表达式。</p>
<p>JSP 表达式的语法格式：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= 表达式 %&gt;</span><br></pre></td></tr></table></figure>

<p>同样，您也可以编写与之等价的 XML 语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:expression</span>&gt;</span></span><br><span class="line">  表达式</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:expression</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>程序示例：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-vbscript">pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      今天的日期是: </span><span class="language-vbscript">&lt;%= (<span class="keyword">new</span> java.util.<span class="built_in">Date</span>()).toLocale<span class="built_in">String</span>()%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016<span class="string">-6</span><span class="string">-25</span> 13:40:07</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="JSP-注释"><a href="#JSP-注释" class="headerlink" title="JSP 注释"></a>JSP 注释</h3><p>JSP 注释主要有两个作用：为代码作注释以及将某段代码注释掉。</p>
<p>JSP 注释的语法格式：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-vbscript">pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSP注释示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="language-vbscript">&lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      今天的日期是: </span><span class="language-vbscript">&lt;%= (<span class="keyword">new</span> java.util.<span class="built_in">Date</span>()).toLocale<span class="built_in">String</span>()%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016<span class="string">-6</span><span class="string">-25</span> 13:41:26</span><br></pre></td></tr></table></figure>

<p>不同情况下使用注释的语法规则：</p>
<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;%-- 注释 --%&gt;</code></td>
<td>JSP 注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td><code>&lt;!-- 注释 --&gt;</code></td>
<td>HTML 注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td><code>&lt;%</code></td>
<td>代表静态 <code>&lt;%</code> 常量</td>
</tr>
<tr>
<td><code>%&gt;</code></td>
<td>代表静态 <code>%&gt;</code> 常量</td>
</tr>
<tr>
<td><code>&#39;</code></td>
<td>在属性中使用的单引号</td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>在属性中使用的双引号</td>
</tr>
</tbody></table>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><p>JSP 提供对 Java 语言的全面支持。您可以在 JSP 程序中使用 Java API 甚至建立 Java 代码块，包括判断语句和循环语句等等。</p>
<h4 id="if…else-语句"><a href="#if…else-语句" class="headerlink" title="if…else 语句"></a>if…else 语句</h4><p><code>If…else</code>块，请看下面这个例子：</p>
<figure class="highlight mojolicious"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-perl">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-perl">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt; &lt;%</span><span class="language-perl">! <span class="keyword">int</span> day = <span class="number">1</span>; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>02.JSP语法 - if...else示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>IF...ELSE 实例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl"> <span class="keyword">if</span> (day == <span class="number">1</span> | day == <span class="number">7</span>) &#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>今天是周末<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl"> &#125; <span class="keyword">else</span> &#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>今天不是周末<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl"> &#125; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">IF</span></span>...<span class="keyword">ELSE</span> 实例</span><br><span class="line">今天不是周末</span><br></pre></td></tr></table></figure>

<h4 id="switch…case-语句"><a href="#switch…case-语句" class="headerlink" title="switch…case 语句"></a>switch…case 语句</h4><p>现在来看看 switch…case 块，与 if…else 块有很大的不同，它使用 out.println()，并且整个都装在脚本程序的标签中，就像下面这样：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-ruby">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt; &lt;%</span><span class="language-ruby">! int day = <span class="number">3</span>; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>02.JSP语法 - switch...case示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Sswitch...case示例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-ruby"> switch(day) &#123; <span class="keyword">case</span> <span class="number">0</span>: out.println(<span class="string">&quot;星期天&quot;</span>); <span class="keyword">break</span>; <span class="keyword">case</span> <span class="number">1</span>:</span></span><br><span class="line"><span class="language-ruby">    out.println(<span class="string">&quot;星期一&quot;</span>); <span class="keyword">break</span>; <span class="keyword">case</span> <span class="number">2</span>: out.println(<span class="string">&quot;星期二&quot;</span>); <span class="keyword">break</span>; <span class="keyword">case</span> <span class="number">3</span>:</span></span><br><span class="line"><span class="language-ruby">    out.println(<span class="string">&quot;星期三&quot;</span>); <span class="keyword">break</span>; <span class="keyword">case</span> <span class="number">4</span>: out.println(<span class="string">&quot;星期四&quot;</span>); <span class="keyword">break</span>; <span class="keyword">case</span> <span class="number">5</span>:</span></span><br><span class="line"><span class="language-ruby">    out.println(<span class="string">&quot;星期五&quot;</span>); <span class="keyword">break</span>; <span class="symbol">default:</span> out.println(<span class="string">&quot;星期六&quot;</span>); &#125; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>浏览器访问，运行后得出以下结果：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SWITCH</span>...<span class="keyword">CASE</span> 实例</span><br><span class="line"></span><br><span class="line">星期三</span><br></pre></td></tr></table></figure>

<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><p>在 JSP 程序中可以使用 Java 的三个基本循环类型：for，while，和 do…while。</p>
<p>让我们来看看 for 循环的例子，以下输出的不同字体大小的”菜鸟教程”：</p>
<figure class="highlight mojolicious"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-perl">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-perl">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt; &lt;%</span><span class="language-perl">! <span class="keyword">int</span> fontSize; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>For 循环实例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl"><span class="keyword">for</span> ( fontSize = <span class="number">1</span>; fontSize &lt;= <span class="number">3</span>; fontSize++)&#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;green&quot;</span> <span class="attr">size</span>=<span class="string">&quot;&lt;%=</span></span></span><span class="language-perl"> fontSize </span><span class="language-xml"><span class="tag"><span class="string">%&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      菜鸟教程 &lt;/font</span></span><br><span class="line"><span class="language-xml">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl">&#125;</span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>运行后得到以下结果：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg" alt="img"></p>
<p>将上例改用 while 循环来写：</p>
<figure class="highlight mojolicious"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-perl">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-perl">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt; &lt;%</span><span class="language-perl">! <span class="keyword">int</span> fontSize; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>While 循环实例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl"><span class="keyword">while</span> ( fontSize &lt;= <span class="number">3</span>)&#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;green&quot;</span> <span class="attr">size</span>=<span class="string">&quot;&lt;%=</span></span></span><span class="language-perl"> fontSize </span><span class="language-xml"><span class="tag"><span class="string">%&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      菜鸟教程 &lt;/font</span></span><br><span class="line"><span class="language-xml">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span><span class="language-perl">fontSize++;</span><span class="language-xml">%&gt; &lt;%</span><span class="language-perl">&#125;</span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>浏览器访问，输出结果为（fontSize 初始化为 0，所以多输出了一行）：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg" alt="img"></p>
<p>JSP 运算符</p>
<p>JSP 支持所有 Java 逻辑和算术运算符。</p>
<p>下表罗列出了 JSP 常见运算符，优先级从高到底：</p>
<table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>操作符</strong></th>
<th><strong>结合性</strong></th>
</tr>
</thead>
<tbody><tr>
<td>后缀</td>
<td><code>() [] .</code> (点运算符)</td>
<td>左到右</td>
</tr>
<tr>
<td>一元</td>
<td><code>++ - - ! ~</code></td>
<td>右到左</td>
</tr>
<tr>
<td>可乘性</td>
<td><code>* / %</code></td>
<td>左到右</td>
</tr>
<tr>
<td>可加性</td>
<td><code>+ -</code></td>
<td>左到右</td>
</tr>
<tr>
<td>移位</td>
<td><code>&gt;&gt; &gt;&gt;&gt; &lt;&lt;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>关系</td>
<td><code>&gt; &gt;= &lt; &lt;=</code></td>
<td>左到右</td>
</tr>
<tr>
<td>相等&#x2F;不等</td>
<td><code>== !=</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位与</td>
<td><code>&amp;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位异或</td>
<td><code>^</code></td>
<td>左到右</td>
</tr>
<tr>
<td>位或</td>
<td>&#96;</td>
<td>&#96;</td>
</tr>
<tr>
<td>逻辑与</td>
<td><code>&amp;&amp;</code></td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑或</td>
<td>&#96;</td>
<td></td>
</tr>
<tr>
<td>条件判断</td>
<td><code>?:</code></td>
<td>右到左</td>
</tr>
<tr>
<td>赋值</td>
<td>&#96;&#x3D; +&#x3D; -&#x3D; *&#x3D; &#x2F;&#x3D; %&#x3D; &gt;&gt;&#x3D; &lt;&lt;&#x3D; &amp;&#x3D; ^&#x3D;</td>
<td>&#x3D;&#96;</td>
</tr>
<tr>
<td>逗号</td>
<td><code>,</code></td>
<td>左到右</td>
</tr>
</tbody></table>
<h3 id="JSP-字面量"><a href="#JSP-字面量" class="headerlink" title="JSP 字面量"></a>JSP 字面量</h3><p>JSP 语言定义了以下几个字面量：</p>
<ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>JSP 指令用来设置整个 JSP 页面相关的属性，如网页的编码方式和脚本语言。</p>
<p>JSP 指令以开<code>&lt;%@</code>开始，以<code>%&gt;</code>结束。</p>
<p>JSP 指令语法格式如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=<span class="string">&quot;value&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。</p>
<p>JSP 中的三种指令标签：</p>
<table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;%@ page ... %&gt;</code></td>
<td>定义网页依赖属性，比如脚本语言、error 页面、缓存需求等等</td>
</tr>
<tr>
<td><code>&lt;%@ include ... %&gt;</code></td>
<td>包含其他文件</td>
</tr>
<tr>
<td><code>&lt;%@ taglib ... %&gt;</code></td>
<td>引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody></table>
<h3 id="Page-指令"><a href="#Page-指令" class="headerlink" title="Page 指令"></a>Page 指令</h3><p>Page 指令为容器提供当前页面的使用说明。一个 JSP 页面可以包含多个<code>page</code>指令。</p>
<p>Page 指令的语法格式：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page attribute=<span class="string">&quot;value&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>等价的 XML 格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:directive.page</span> <span class="attr">attribute</span>=<span class="string">&quot;value&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@<span class="built_in"> page </span><span class="attribute">language</span>=<span class="string">&quot;java&quot;</span> <span class="attribute">contentType</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line"><span class="attribute">pageEncoding</span>=<span class="string">&quot;UTF-8&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>下表列出与 Page 指令相关的属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>buffer</td>
<td>指定 out 对象使用缓冲区的大小</td>
</tr>
<tr>
<td>autoFlush</td>
<td>控制 out 对象的 缓存区</td>
</tr>
<tr>
<td>contentType</td>
<td>指定当前 JSP 页面的 MIME 类型和字符编码</td>
</tr>
<tr>
<td>errorPage</td>
<td>指定当 JSP 页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>指定当前页面是否可以作为另一个 JSP 页面的错误处理页面</td>
</tr>
<tr>
<td>extends</td>
<td>指定 servlet 从哪一个类继承</td>
</tr>
<tr>
<td>import</td>
<td>导入要使用的 Java 类</td>
</tr>
<tr>
<td>info</td>
<td>定义 JSP 页面的描述信息</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>指定对 JSP 页面的访问是否为线程安全</td>
</tr>
<tr>
<td>language</td>
<td>定义 JSP 页面所用的脚本语言，默认是 Java</td>
</tr>
<tr>
<td>session</td>
<td>指定 JSP 页面是否使用 session</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>指定是否执行 EL 表达式</td>
</tr>
<tr>
<td>isScriptingEnabled</td>
<td>确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<h3 id="Include-指令"><a href="#Include-指令" class="headerlink" title="Include 指令"></a>Include 指令</h3><p>JSP 可以通过<code>include</code>指令来包含其他文件。</p>
<p>被包含的文件可以是 JSP 文件、HTML 文件或文本文件。包含的文件就好像是该 JSP 文件的一部分，会被同时编译执行。</p>
<p>Include 指令的语法格式如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include <span class="keyword">file</span>=<span class="string">&quot;文件相对 url 地址&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP 编译器默认在当前路径下寻找。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.<span class="keyword">include</span> <span class="keyword">file</span>=<span class="string">&quot;文件相对 url 地址&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Taglib-指令"><a href="#Taglib-指令" class="headerlink" title="Taglib 指令"></a>Taglib 指令</h3><p>JSP 允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p><code>taglib</code>指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p><code>taglib</code>指令的语法：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">&quot;uri&quot;</span> prefix=<span class="string">&quot;prefixOfTag&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>uri 属性确定标签库的位置，prefix 属性指定标签库的前缀。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.taglib <span class="attribute">uri</span>=<span class="string">&quot;uri&quot;</span> <span class="attribute">prefix</span>=<span class="string">&quot;prefixOfTag&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP-动作元素"><a href="#JSP-动作元素" class="headerlink" title="JSP 动作元素"></a>JSP 动作元素</h2><p>JSP 动作元素是一组 JSP 内置的标签，只需要书写很少的标记代码就能使用 JSP 提供的丰富功能。JSP 动作元素是对常用的 JSP 功能的抽象与封装，包括两种，自定义 JSP 动作元素与标准 JSP 动作元素。</p>
<p>与 JSP 指令元素不同的是，JSP 动作元素在请求处理阶段起作用。JSP 动作元素是用 XML 语法写成的。</p>
<p>利用 JSP 动作可以动态地插入文件、重用 JavaBean 组件、把用户重定向到另外的页面、为 Java 插件生成 HTML 代码。</p>
<p>动作元素只有一种语法，它符合 XML 标准：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:action_name</span> <span class="attr">attribute</span>=<span class="string">&quot;value&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>动作元素基本上都是预定义的函数，JSP 规范定义了一系列的标准动作，它用 JSP 作为前缀，可用的标准动作元素如下：</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>jsp:include</td>
<td>在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td>jsp:useBean</td>
<td>寻找或者实例化一个 JavaBean。</td>
</tr>
<tr>
<td>jsp:setProperty</td>
<td>设置 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:getProperty</td>
<td>输出某个 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:forward</td>
<td>把请求转到一个新的页面。</td>
</tr>
<tr>
<td>jsp:plugin</td>
<td>根据浏览器类型为 Java 插件生成 OBJECT 或 EMBED 标记。</td>
</tr>
<tr>
<td>jsp:element</td>
<td>定义动态 XML 元素</td>
</tr>
<tr>
<td>jsp:attribute</td>
<td>设置动态定义的 XML 元素属性。</td>
</tr>
<tr>
<td>jsp:body</td>
<td>设置动态定义的 XML 元素内容。</td>
</tr>
<tr>
<td>jsp:text</td>
<td>在 JSP 页面和文档中使用写入文本的模板</td>
</tr>
</tbody></table>
<h3 id="常见的属性"><a href="#常见的属性" class="headerlink" title="常见的属性"></a>常见的属性</h3><p>所有的动作要素都有两个属性：id 属性和 scope 属性。</p>
<ul>
<li><strong>id 属性：</strong>id 属性是动作元素的唯一标识，可以在 JSP 页面中引用。动作元素创建的 id 值可以通过 PageContext 来调用。</li>
<li><strong>scope 属性：</strong>该属性用于识别动作元素的生命周期。 id 属性和 scope 属性有直接关系，scope 属性定义了相关联 id 对象的寿命。 scope 属性有四个可能的值： (a) page, (b)request, (c)session, 和 (d) application。</li>
</ul>
<h3 id=""><a href="#" class="headerlink" title="&lt;jsp:include&gt;"></a><code>&lt;jsp:include&gt;</code></h3><p><code>&lt;jsp:include&gt;</code> 用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。</p>
<p>如果被包含的文件为 JSP 程序，则会先执行 JSP 程序，再将执行结果包含进来。</p>
<p>语法格式如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include <span class="attribute">page</span>=<span class="string">&quot;相对 URL 地址&quot;</span> <span class="attribute">flush</span>=<span class="string">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>前面已经介绍过 include 指令，它是在 JSP 文件被转换成 Servlet 的时候引入文件，而这里的 jsp:include 动作不同，插入文件的时间是在页面被请求的时候。</p>
<p>以下是 include 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>page</td>
<td>包含在页面中的相对 URL 地址。</td>
</tr>
<tr>
<td>flush</td>
<td>布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody></table>
<p>示例：</p>
<p>以下我们定义了两个文件 <strong>date.jsp</strong> 和 <strong>main.jsp</strong>，代码如下所示：</p>
<p>date.jsp 文件代码：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-vbscript">pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  今天的日期是: </span><span class="language-vbscript">&lt;%= (<span class="keyword">new</span> java.util.<span class="built_in">Date</span>())%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>main.jsp 文件代码：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-ruby">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>include 动作实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:include</span> <span class="attr">page</span>=<span class="string">&quot;date.jsp&quot;</span> <span class="attr">flush</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> 动作实例</span><br><span class="line"></span><br><span class="line"><span class="section">今天的日期是: 2016-6-25 14:08:17</span></span><br></pre></td></tr></table></figure>

<h3 id="-1"><a href="#-1" class="headerlink" title="&lt;jsp:useBean&gt;"></a><code>&lt;jsp:useBean&gt;</code></h3><p><strong>jsp:useBean</strong> 动作用来加载一个将在 JSP 页面中使用的 JavaBean。</p>
<p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean 动作最简单的语法为：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean <span class="built_in">id</span>=<span class="string">&quot;name&quot;</span> <span class="built_in">class</span>=<span class="string">&quot;package.class&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索 bean 的属性。</p>
<p>以下是 useBean 动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>指定 Bean 的完整包名。</td>
</tr>
<tr>
<td>type</td>
<td>指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td>beanName</td>
<td>通过 java.beans.Beans 的 instantiate() 方法指定 Bean 的名字。</td>
</tr>
</tbody></table>
<p>在给出具体实例前，让我们先来看下 jsp:setProperty 和 jsp:getProperty 动作元素：</p>
<h3 id="-2"><a href="#-2" class="headerlink" title="&lt;jsp:setProperty&gt;"></a><code>&lt;jsp:setProperty&gt;</code></h3><p>jsp:setProperty 用来设置已经实例化的 Bean 对象的属性，有两种用法。首先，你可以在 jsp:useBean 元素的外面（后面）使用 jsp:setProperty，如下所示：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp<span class="function">:useBean</span> id=<span class="string">&quot;myName&quot;</span> <span class="string">...</span> /&gt;</span><br><span class="line"><span class="string">...</span></span><br><span class="line">&lt;jsp<span class="function">:setProperty</span> name=<span class="string">&quot;myName&quot;</span> property=<span class="string">&quot;someProperty&quot;</span> <span class="string">.../</span>&gt;</span><br></pre></td></tr></table></figure>

<p>此时，不管 jsp:useBean 是找到了一个现有的 Bean，还是新创建了一个 Bean 实例，jsp:setProperty 都会执行。第二种用法是把 jsp:setProperty 放入 jsp:useBean 元素的内部，如下所示：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp<span class="function">:useBean</span> id=<span class="string">&quot;myName&quot;</span> <span class="string">...</span> &gt;</span><br><span class="line"><span class="string">...</span></span><br><span class="line">   &lt;jsp<span class="function">:setProperty</span> name=<span class="string">&quot;myName&quot;</span> property=<span class="string">&quot;someProperty&quot;</span> <span class="string">.../</span>&gt;</span><br><span class="line">&lt;<span class="string">/jsp</span><span class="function">:useBean</span>&gt;</span><br></pre></td></tr></table></figure>

<p>此时，jsp:setProperty 只有在新建 Bean 实例时才会执行，如果是使用现有实例则不执行 jsp:setProperty。</p>
<p>jsp:setProperty 动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>name 属性是必需的。它表示要设置属性的是哪个 Bean。</td>
</tr>
<tr>
<td>property</td>
<td>property 属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果 property 的值是”*“，表示所有名字和 Bean 属性名字匹配的请求参数都将被传递给相应的属性 set 方法。</td>
</tr>
<tr>
<td>value</td>
<td>value 属性是可选的。该属性用来指定 Bean 属性的值。字符串数据会在目标类中通过标准的 valueOf 方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean 和 Boolean 类型的属性值（比如”true”）通过 Boolean.valueOf 转换，int 和 Integer 类型的属性值（比如”42”）通过 Integer.valueOf 转换。 　　 value 和 param 不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td>param</td>
<td>param 是可选的。它指定用哪个请求参数作为 Bean 属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把 null 传递给 Bean 属性的 set 方法。因此，你可以让 Bean 自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<h3 id="-3"><a href="#-3" class="headerlink" title="&lt;jsp:getProperty&gt;"></a><code>&lt;jsp:getProperty&gt;</code></h3><p>jsp:getProperty 动作提取指定 Bean 属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp<span class="function">:useBean</span> id=<span class="string">&quot;myName&quot;</span> <span class="string">...</span> /&gt;</span><br><span class="line"><span class="string">...</span></span><br><span class="line">&lt;jsp<span class="function">:getProperty</span> name=<span class="string">&quot;myName&quot;</span> property=<span class="string">&quot;someProperty&quot;</span> <span class="string">.../</span>&gt;</span><br></pre></td></tr></table></figure>

<p>下表是与 getProperty 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>要检索的 Bean 属性名称。Bean 必须已定义。</td>
</tr>
<tr>
<td>property</td>
<td>表示要提取 Bean 属性的值</td>
</tr>
</tbody></table>
<p>实例</p>
<p>以下实例我们使用了 Bean:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;菜鸟教程&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译以上实例文件 TestBean.java ：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>javac TestBean.java</span><br></pre></td></tr></table></figure>

<p>编译完成后会在当前目录下生成一个 <strong>TestBean.class</strong> 文件， 将该文件拷贝至当前 JSP 项目的 <strong>WebContent&#x2F;WEB-INF&#x2F;classes&#x2F;com&#x2F;runoob&#x2F;main</strong> 下( com&#x2F;runoob&#x2F;main 包路径，没有需要手动创建)。</p>
<p>下面是一个 Eclipse 中目录结构图：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg" alt="img"></p>
<p>下面是一个很简单的例子，它的功能是装载一个 Bean，然后设置&#x2F;读取它的 message 属性。</p>
<p>现在让我们在 main.jsp 文件中调用该 Bean:</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-ruby">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Jsp 使用 JavaBean 实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:useBean</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.runoob.main.TestBean&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:setProperty</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> <span class="attr">property</span>=<span class="string">&quot;message&quot;</span> <span class="attr">value</span>=<span class="string">&quot;菜鸟教程...&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>输出信息....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:getProperty</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> <span class="attr">property</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>浏览器访问，执行以上文件，输出如下所示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg" alt="img"></p>
<h3 id="-4"><a href="#-4" class="headerlink" title="&lt;jsp:forward&gt;"></a><code>&lt;jsp:forward&gt;</code></h3><p>jsp:forward 动作把请求转到另外的页面。jsp:forward 标记只有一个属性 page。语法格式如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">&quot;相对 URL 地址&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>以下是 forward 相关联的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>page</td>
<td>page 属性包含的是一个相对 URL。page 的值既可以直接给出，也可以在请求的时候动态计算，可以是一个 JSP 页面或者一个 Java Servlet.</td>
</tr>
</tbody></table>
<p>实例</p>
<p>以下实例我们使用了两个文件，分别是： date.jsp 和 main.jsp。</p>
<p>date.jsp 文件代码如下：</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-vbscript">pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  今天的日期是: </span><span class="language-vbscript">&lt;%= (<span class="keyword">new</span> java.util.<span class="built_in">Date</span>()).toLocale<span class="built_in">String</span>()%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>main.jsp 文件代码：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-ruby">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>forward 动作实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">&quot;date.jsp&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016<span class="string">-6</span><span class="string">-25</span> 14:37:25</span><br></pre></td></tr></table></figure>

<h3 id="-5"><a href="#-5" class="headerlink" title="&lt;jsp:plugin&gt;"></a><code>&lt;jsp:plugin&gt;</code></h3><p>jsp:plugin 动作用来根据浏览器的类型，插入通过 Java 插件 运行 Java Applet 所必需的 OBJECT 或 EMBED 元素。</p>
<p>如果需要的插件不存在，它会下载插件，然后执行 Java 组件。 Java 组件可以是一个 applet 或一个 JavaBean。</p>
<p>plugin 动作有多个对应 HTML 元素的属性用于格式化 Java 组件。param 元素可用于向 Applet 或 Bean 传递参数。</p>
<p>以下是使用 plugin 动作元素的典型实例:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:plugin</span> <span class="attr">type</span>=<span class="string">&quot;applet&quot;</span> <span class="attr">codebase</span>=<span class="string">&quot;dirname&quot;</span> <span class="attr">code</span>=<span class="string">&quot;MyApplet.class&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">width</span>=<span class="string">&quot;60&quot;</span> <span class="attr">height</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:param</span> <span class="attr">name</span>=<span class="string">&quot;fontcolor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;red&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:param</span> <span class="attr">name</span>=<span class="string">&quot;background&quot;</span> <span class="attr">value</span>=<span class="string">&quot;black&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:fallback</span>&gt;</span></span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   <span class="tag">&lt;/<span class="name">jsp:fallback</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你有兴趣可以尝试使用 applet 来测试 <code>jsp:plugin</code> 动作元素，<code>&lt;fallback&gt;</code> 元素是一个新元素，在组件出现故障的错误是发送给用户错误信息。</p>
<h3 id="、-、"><a href="#、-、" class="headerlink" title="&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;"></a><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code></h3><p><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code> 动作元素动态定义 XML 元素。动态是非常重要的，这就意味着 XML 元素在编译时是动态生成的而非静态。</p>
<p>以下实例动态定义了 XML 元素：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span></span><br><span class="line"><span class="language-ruby">pageEncoding=<span class="string">&quot;UTF-8&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">jsp:element</span> <span class="attr">name</span>=<span class="string">&quot;xmlElement&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">jsp:attribute</span> <span class="attr">name</span>=<span class="string">&quot;xmlElementAttr&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        属性值</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">jsp:attribute</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">jsp:body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        XML 元素的主体</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">jsp:body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">jsp:element</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>浏览器访问以下页面，输出结果如下所示：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg" alt="img"></p>
<h3 id="-6"><a href="#-6" class="headerlink" title="&lt;jsp:text&gt;"></a><code>&lt;jsp:text&gt;</code></h3><p><a href="jsp:text">jsp:text</a>动作元素允许在 JSP 页面和文档中使用写入文本的模板，语法格式如下：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:<span class="built_in">text</span>&gt;模板数据&lt;/jsp:<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure>

<p>以上文本模板不能包含其他元素，只能只能包含文本和 EL 表达式（注：EL 表达式将在后续章节中介绍）。请注意，在 XML 文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个 CDATA 部分的值。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span>&lt;![CDATA[&lt;br&gt;]]&gt;<span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到 <code>&lt;jsp:text&gt;</code> 动作元素，实例如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span>&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span><br><span class="line">&quot;DTD/xhtml1-strict.dtd&quot;&gt;]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>jsp:text action<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span><span class="tag">&lt;<span class="name">book</span>&gt;</span><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span></span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span><span class="tag">&lt;/<span class="name">book</span>&gt;</span><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>你可以对以上实例尝试使用<a href="jsp:text">jsp:text</a>及不使用该动作元素执行结果的区别。</p>
<h2 id="JSP-隐式对象"><a href="#JSP-隐式对象" class="headerlink" title="JSP 隐式对象"></a>JSP 隐式对象</h2><p>JSP 隐式对象是 JSP 容器为每个页面提供的 Java 对象，开发者可以直接使用它们而不用显式声明。JSP 隐式对象也被称为预定义变量。</p>
<p>JSP 所支持的九大隐式对象：</p>
<table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>response</td>
<td><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>out</td>
<td><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>session</td>
<td><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>application</td>
<td><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>config</td>
<td><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td><strong>PageContext</strong>类的实例，提供对 JSP 页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>page</td>
<td>类似于 Java 类中的 this 关键字</td>
</tr>
<tr>
<td>Exception</td>
<td><strong>Exception</strong>类的对象，代表发生错误的 JSP 页面中对应的异常对象</td>
</tr>
</tbody></table>
<h3 id="request-对象"><a href="#request-对象" class="headerlink" title="request 对象"></a>request 对象</h3><p><code>request</code>对象是<code>javax.servlet.http.HttpServletRequest</code> 类的实例。</p>
<p>每当客户端请求一个 JSP 页面时，JSP 引擎就会制造一个新的<code>request</code>对象来代表这个请求。</p>
<p><code>request</code>对象提供了一系列方法来获取 HTTP 头信息，cookies，HTTP 方法等等。</p>
<h3 id="response-对象"><a href="#response-对象" class="headerlink" title="response 对象"></a>response 对象</h3><p><code>response</code>对象是<code>javax.servlet.http.HttpServletResponse</code>类的实例。</p>
<p>当服务器创建<code>request</code>对象时会同时创建用于响应这个客户端的<code>response</code>对象。</p>
<p><code>response</code>对象也定义了处理 HTTP 头模块的接口。通过这个对象，开发者们可以添加新的 cookies，时间戳，HTTP 状态码等等。</p>
<h3 id="out-对象"><a href="#out-对象" class="headerlink" title="out 对象"></a>out 对象</h3><p><code>out</code>对象是<code>javax.servlet.jsp.JspWriter</code>类的实例，用来在<code>response</code>对象中写入内容。</p>
<p>最初的<code>JspWriter</code>类对象根据页面是否有缓存来进行不同的实例化操作。可以在<code>page</code>指令中使用<code>buffered=&#39;false&#39;</code>属性来轻松关闭缓存。</p>
<p><code>JspWriter</code>类包含了大部分<code>java.io.PrintWriter</code>类中的方法。不过，<code>JspWriter</code>新增了一些专为处理缓存而设计的方法。还有就是，<code>JspWriter</code>类会抛出<code>IOExceptions</code>异常，而<code>PrintWriter</code>不会。</p>
<p>下表列出了我们将会用来输出<code>boolean</code>，<code>char</code>，<code>int</code>，<code>double</code>，<code>String</code>，<code>object</code>等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>out.print(dataType dt)</strong></td>
<td>输出 Type 类型的值</td>
</tr>
<tr>
<td><strong>out.println(dataType dt)</strong></td>
<td>输出 Type 类型的值然后换行</td>
</tr>
<tr>
<td><strong>out.flush()</strong></td>
<td>刷新输出流</td>
</tr>
</tbody></table>
<h3 id="session-对象"><a href="#session-对象" class="headerlink" title="session 对象"></a>session 对象</h3><p><code>session</code>对象是<code>javax.servlet.http.HttpSession</code>类的实例。和 Java Servlets 中的<code>session</code>对象有一样的行为。</p>
<p><code>session</code>对象用来跟踪在各个客户端请求间的会话。</p>
<h3 id="application-对象"><a href="#application-对象" class="headerlink" title="application 对象"></a>application 对象</h3><p><code>application</code>对象直接包装了 servlet 的<code>ServletContext</code>类的对象，是<code>javax.servlet.ServletContext</code>类的实例。</p>
<p>这个对象在 JSP 页面的整个生命周期中都代表着这个 JSP 页面。这个对象在 JSP 页面初始化时被创建，随着<code>jspDestroy()</code>方法的调用而被移除。</p>
<p>通过向<code>application</code>中添加属性，则所有组成您 web 应用的 JSP 文件都能访问到这些属性。</p>
<h3 id="config-对象"><a href="#config-对象" class="headerlink" title="config 对象"></a>config 对象</h3><p><code>config</code>对象是<code>javax.servlet.ServletConfig</code>类的实例，直接包装了 servlet 的<code>ServletConfig</code>类的对象。</p>
<p>这个对象允许开发者访问 Servlet 或者 JSP 引擎的初始化参数，比如文件路径等。</p>
<p>以下是 config 对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.getServletName()<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的 servlet 名字，注意，<code>&lt;servlet-name&gt;</code>元素在<code>WEB-INF\web.xml</code>文件中定义。</p>
<h3 id="pageContext-对象"><a href="#pageContext-对象" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p><code>pageContext</code>对象是<code>javax.servlet.jsp.PageContext</code>类的实例，用来代表整个 JSP 页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了<code>request</code>对象和<code>response</code>对象的引用。<code>application</code>对象，<code>config</code>对象，<code>session</code>对象，<code>out</code>对象可以通过访问这个对象的属性来导出。</p>
<p><code>pageContext</code>对象也包含了传给 JSP 页面的指令信息，包括缓存信息，ErrorPage URL,页面 scope 等。</p>
<p><code>PageContext</code>类定义了一些字段，包括 PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了 40 余种方法，有一半继承自<code>javax.servlet.jsp.JspContext</code> 类。</p>
<p>其中一个重要的方法就是<code>removeArribute()</code>，它可接受一个或两个参数。比如，pageContext.removeArribute(“attrName”)移除四个 scope 中相关属性，但是下面这种方法只移除特定 scope 中的相关属性：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext.removeAttribute<span class="punctuation">(</span><span class="string">&quot;attrName&quot;</span><span class="punctuation">,</span> PAGE_SCOPE<span class="punctuation">)</span><span class="punctuation">;</span></span><br></pre></td></tr></table></figure>

<h3 id="page-对象"><a href="#page-对象" class="headerlink" title="page 对象"></a>page 对象</h3><p>这个对象就是页面实例的引用。它可以被看做是整个 JSP 页面的代表。</p>
<p><code>page</code>对象就是<code>this</code>对象的同义词。</p>
<h3 id="exception-对象"><a href="#exception-对象" class="headerlink" title="exception 对象"></a>exception 对象</h3><p><code>exception</code>对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h2 id="EL-表达式"><a href="#EL-表达式" class="headerlink" title="EL 表达式"></a>EL 表达式</h2><p>EL 表达式是用<code>$&#123;&#125;</code>括起来的脚本，用来更方便地读取对象。EL 表达式写在 JSP 的 HTML 代码中，而不能写在<code>&lt;%</code>与<code>%&gt;</code>引起的 JSP 脚本中。</p>
<p>JSP 表达式语言（EL）使得访问存储在 JavaBean 中的数据变得非常简单。JSP EL 既可以用来创建算术表达式也可以用来创建逻辑表达式。在 JSP EL 表达式内可以使用整型数，浮点数，字符串，常量 true、false，还有 null。</p>
<h3 id="一个简单的语法"><a href="#一个简单的语法" class="headerlink" title="一个简单的语法"></a>一个简单的语法</h3><p>典型的，当您需要在 JSP 标签中指定一个属性值时，只需要简单地使用字符串即可：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty <span class="attribute">name</span>=<span class="string">&quot;box&quot;</span> <span class="attribute">property</span>=<span class="string">&quot;perimeter&quot;</span> <span class="attribute">value</span>=<span class="string">&quot;100&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>JSP EL 允许您指定一个表达式来表示属性值。一个简单的表达式语法如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;<span class="built_in">expr</span>&#125;</span></span><br></pre></td></tr></table></figure>

<p>其中，expr 指的是表达式。在 JSP EL 中通用的操作符是”.”和”[]”。这两个操作符允许您通过内嵌的 JSP 对象访问各种各样的 JavaBean 属性。</p>
<p>举例来说，上面的 <code>&lt;jsp:setProperty&gt;</code> 标签可以使用表达式语言改写成如下形式：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty</span><br><span class="line">  <span class="attribute">name</span>=<span class="string">&quot;box&quot;</span></span><br><span class="line">  <span class="attribute">property</span>=<span class="string">&quot;perimeter&quot;</span></span><br><span class="line">  <span class="attribute">value</span>=<span class="string">&quot;<span class="variable">$&#123;2*box.width+2*box.height&#125;</span>&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>当 JSP 编译器在属性中见到”${}”格式后，它会产生代码来计算这个表达式，并且产生一个替代品来代替表达式的值。</p>
<p>您也可以在标签的模板文本中使用表达式语言。比如 <code>&lt;jsp:text&gt;</code> 标签简单地将其主体中的文本插入到 JSP 输出中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello JSP!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在，在<a href="jsp:text">jsp:text</a>标签主体中使用表达式，就像这样：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:<span class="type">text</span>&gt;</span><br><span class="line">  <span class="type">Box</span> Perimeter <span class="keyword">is</span>: $&#123;<span class="number">2</span>*<span class="type">box</span>.width + <span class="number">2</span>*<span class="type">box</span>.height&#125;</span><br><span class="line">&lt;/jsp:<span class="type">text</span>&gt;</span><br></pre></td></tr></table></figure>

<p>在 EL 表达式中可以使用圆括号来组织子表达式。比如 <code>$&#123;(1 + 2) _ 3&#125;</code> 等于 9，但是 <code>$&#123;1 + (2 _ 3)&#125;</code> 等于 7。</p>
<p>想要停用对 EL 表达式的评估的话，需要使用 page 指令将 isELIgnored 属性值设为 true：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =<span class="string">&quot;true|false&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>这样，EL 表达式就会被忽略。若设为 false，则容器将会计算 EL 表达式。</p>
<h3 id="EL-中的基础操作符"><a href="#EL-中的基础操作符" class="headerlink" title="EL 中的基础操作符"></a>EL 中的基础操作符</h3><p>EL 表达式支持大部分 Java 所提供的算术和逻辑操作符：</p>
<table>
<thead>
<tr>
<th><strong>操作符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>访问一个 Bean 属性或者一个映射条目</td>
</tr>
<tr>
<td>[]</td>
<td>访问一个数组或者链表的元素</td>
</tr>
<tr>
<td>( )</td>
<td>组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减或负</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>&#x2F; or div</td>
<td>除</td>
</tr>
<tr>
<td>% or mod</td>
<td>取模</td>
</tr>
<tr>
<td>&#x3D;&#x3D; or eq</td>
<td>测试是否相等</td>
</tr>
<tr>
<td>!&#x3D; or ne</td>
<td>测试是否不等</td>
</tr>
<tr>
<td>&lt; or lt</td>
<td>测试是否小于</td>
</tr>
<tr>
<td>&gt; or gt</td>
<td>测试是否大于</td>
</tr>
<tr>
<td>&lt;&#x3D; or le</td>
<td>测试是否小于等于</td>
</tr>
<tr>
<td>&gt;&#x3D; or ge</td>
<td>测试是否大于等于</td>
</tr>
<tr>
<td>&amp;&amp; or and</td>
<td>测试逻辑与</td>
</tr>
<tr>
<td>|| or or</td>
<td>测试逻辑或</td>
</tr>
<tr>
<td>! or not</td>
<td>测试取反</td>
</tr>
<tr>
<td>empty</td>
<td>测试是否空值</td>
</tr>
</tbody></table>
<h3 id="JSP-EL-中的函数"><a href="#JSP-EL-中的函数" class="headerlink" title="JSP EL 中的函数"></a>JSP EL 中的函数</h3><p>JSP EL 允许您在表达式中使用函数。这些函数必须被定义在自定义标签库中。函数的使用语法如下：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ns:<span class="keyword">func</span><span class="params">(param1, param2, ...)</span>&#125;</span><br></pre></td></tr></table></figure>

<p>ns 指的是命名空间（namespace），func 指的是函数的名称，param1 指的是第一个参数，param2 指的是第二个参数，以此类推。比如，有函数 fn:length，在 JSTL 库中定义，可以像下面这样来获取一个字符串的长度：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;<span class="function"><span class="keyword">fn</span>:<span class="title">length</span>(<span class="params"><span class="string">&quot;Get my length&quot;</span></span>)&#125;</span></span><br></pre></td></tr></table></figure>

<p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用 <code>&lt;taglib&gt;</code> 标签在 JSP 文件中包含这些库。</p>
<h3 id="JSP-EL-隐含对象"><a href="#JSP-EL-隐含对象" class="headerlink" title="JSP EL 隐含对象"></a>JSP EL 隐含对象</h3><p>JSP EL 支持下表列出的隐含对象：</p>
<table>
<thead>
<tr>
<th><strong>隐含对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>pageScope</td>
<td>page 作用域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request 作用域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session 作用域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application 作用域</td>
</tr>
<tr>
<td>param</td>
<td>Request 对象的参数，字符串</td>
</tr>
<tr>
<td>paramValues</td>
<td>Request 对象的参数，字符串集合</td>
</tr>
<tr>
<td>header</td>
<td>HTTP 信息头，字符串</td>
</tr>
<tr>
<td>headerValues</td>
<td>HTTP 信息头，字符串集合</td>
</tr>
<tr>
<td>initParam</td>
<td>上下文初始化参数</td>
</tr>
<tr>
<td>cookie</td>
<td>Cookie 值</td>
</tr>
<tr>
<td>pageContext</td>
<td>当前页面的 pageContext</td>
</tr>
</tbody></table>
<p>您可以在表达式中使用这些对象，就像使用变量一样。接下来会给出几个例子来更好的理解这个概念。</p>
<h3 id="pageContext-对象-1"><a href="#pageContext-对象-1" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p>pageContext 对象是 JSP 中 pageContext 对象的引用。通过 pageContext 对象，您可以访问 request 对象。比如，访问 request 对象传入的查询字符串，就像这样：</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$&#123;</span>pageContext.request.<span class="keyword">query</span>String&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Scope-对象"><a href="#Scope-对象" class="headerlink" title="Scope 对象"></a>Scope 对象</h3><p>pageScope，requestScope，sessionScope，applicationScope 变量用来访问存储在各个作用域层次的变量。</p>
<p>举例来说，如果您需要显式访问在 applicationScope 层的 box 变量，可以这样来访问：applicationScope.box。</p>
<h3 id="param-和-paramValues-对象"><a href="#param-和-paramValues-对象" class="headerlink" title="param 和 paramValues 对象"></a>param 和 paramValues 对象</h3><p>param 和 paramValues 对象用来访问参数值，通过使用 request.getParameter 方法和 request.getParameterValues 方法。</p>
<p>举例来说，访问一个名为 order 的参数，可以这样使用表达式：<code>$&#123;param.order&#125;</code>，或者<code>$&#123;param[&quot;order&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 request 中的 username 参数：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt;</span> <span class="variable">&lt;% String title = &quot;Accessing Request</span></span><br><span class="line"><span class="variable">Param&quot;; %&gt;</span></span><br><span class="line"><span class="variable">&lt;html&gt;</span></span><br><span class="line">  <span class="variable">&lt;head&gt;</span></span><br><span class="line">    <span class="variable">&lt;title&gt;</span><span class="variable">&lt;% out.print(title); %&gt;</span><span class="variable">&lt;/title&gt;</span></span><br><span class="line">  <span class="variable">&lt;/head&gt;</span></span><br><span class="line">  <span class="variable">&lt;body&gt;</span></span><br><span class="line">    <span class="variable">&lt;center&gt;</span></span><br><span class="line">      <span class="variable">&lt;h1&gt;</span><span class="variable">&lt;% out.print(title); %&gt;</span><span class="variable">&lt;/h1&gt;</span></span><br><span class="line">    <span class="variable">&lt;/center&gt;</span></span><br><span class="line">    <span class="variable">&lt;div align=&quot;center&quot;&gt;</span></span><br><span class="line">      <span class="variable">&lt;p&gt;</span>$&#123;param[<span class="string">&quot;username&quot;</span>]&#125;<span class="variable">&lt;/p&gt;</span></span><br><span class="line">    <span class="variable">&lt;/div&gt;</span></span><br><span class="line">  <span class="variable">&lt;/body&gt;</span></span><br><span class="line"><span class="variable">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>param 对象返回单一的字符串，而 paramValues 对象则返回一个字符串数组。</p>
<h3 id="header-和-headerValues-对象"><a href="#header-和-headerValues-对象" class="headerlink" title="header 和 headerValues 对象"></a>header 和 headerValues 对象</h3><p>header 和 headerValues 对象用来访问信息头，通过使用 request.getHeader 方法和 request.getHeaders 方法。</p>
<p>举例来说，要访问一个名为 user-agent 的信息头，可以这样使用表达式：<code>$&#123;header.user-agent&#125;</code>，或者 <code>$&#123;header[&quot;user-agent&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 user-agent 信息头：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt;</span> <span class="variable">&lt;% String title = &quot;User Agent</span></span><br><span class="line"><span class="variable">Example&quot;; %&gt;</span></span><br><span class="line"><span class="variable">&lt;html&gt;</span></span><br><span class="line">  <span class="variable">&lt;head&gt;</span></span><br><span class="line">    <span class="variable">&lt;title&gt;</span><span class="variable">&lt;% out.print(title); %&gt;</span><span class="variable">&lt;/title&gt;</span></span><br><span class="line">  <span class="variable">&lt;/head&gt;</span></span><br><span class="line">  <span class="variable">&lt;body&gt;</span></span><br><span class="line">    <span class="variable">&lt;center&gt;</span></span><br><span class="line">      <span class="variable">&lt;h1&gt;</span><span class="variable">&lt;% out.print(title); %&gt;</span><span class="variable">&lt;/h1&gt;</span></span><br><span class="line">    <span class="variable">&lt;/center&gt;</span></span><br><span class="line">    <span class="variable">&lt;div align=&quot;center&quot;&gt;</span></span><br><span class="line">      <span class="variable">&lt;p&gt;</span>$&#123;header[<span class="string">&quot;user-agent&quot;</span>]&#125;<span class="variable">&lt;/p&gt;</span></span><br><span class="line">    <span class="variable">&lt;/div&gt;</span></span><br><span class="line">  <span class="variable">&lt;/body&gt;</span></span><br><span class="line"><span class="variable">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg" alt="img"></p>
<p>header 对象返回单一值，而 headerValues 则返回一个字符串数组。</p>
<h2 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h2><p>JSP 标准标签库（JSTL）是一个 JSP 标签集合，它封装了 JSP 应用的通用核心功能。</p>
<p>JSTL 支持通用的、结构化的任务，比如迭代，条件判断，XML 文档操作，国际化标签，SQL 标签。 除了这些，它还提供了一个框架来使用集成 JSTL 的自定义标签。</p>
<p>根据 JSTL 标签所提供的功能，可以将其分为 5 个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<h3 id="JSTL-库安装"><a href="#JSTL-库安装" class="headerlink" title="JSTL 库安装"></a>JSTL 库安装</h3><p>Apache Tomcat 安装 JSTL 库步骤如下：</p>
<p>从 Apache 的标准标签库中下载的二进包(jakarta-taglibs-standard-current.zip)。</p>
<ul>
<li>官方下载地址：<a target="_blank" rel="noopener" href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a></li>
<li>本站下载地址：<a target="_blank" rel="noopener" href="http://static.runoob.com/download/jakarta-taglibs-standard-1.1.2.tar.gz">jakarta-taglibs-standard-1.1.2.zip</a></li>
</ul>
<p>下载 <strong>jakarta-taglibs-standard-1.1.2.zip</strong> 包并解压，将 <strong>jakarta-taglibs-standard-1.1.2&#x2F;lib&#x2F;</strong> 下的两个 jar 文件：<strong>standard.jar</strong> 和 <strong>jstl.jar</strong> 文件拷贝到 <strong>&#x2F;WEB-INF&#x2F;lib&#x2F;</strong> 下。</p>
<p>将 tld 下的需要引入的 tld 文件复制到 WEB-INF 目录下。</p>
<p>接下来我们在 web.xml 文件中添加以下配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">&quot;2.4&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/fmt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/fmt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/fmt-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/fmt-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/core<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/c.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/core-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/c-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/sql<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/sql.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/sql-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/sql-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/x<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/x.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/x-rt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/x-rt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">jsp-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用任何库，你必须在每个 JSP 文件中的头部包含 <strong><code>&lt;taglib&gt;</code></strong> 标签。</p>
<h3 id="核心标签"><a href="#核心标签" class="headerlink" title="核心标签"></a>核心标签</h3><p>核心标签是最常用的 JSTL 标签。引用核心标签库的语法如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-out-tag.html"><code>&lt;c:out&gt;</code></a></td>
<td align="left">用于在 JSP 中显示数据，就像&lt;%&#x3D; … &gt;</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-set-tag.html"><code>&lt;c:set&gt;</code></a></td>
<td align="left">用于保存数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-remove-tag.html"><code>&lt;c:remove&gt;</code></a></td>
<td align="left">用于删除数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-catch-tag.html"><code>&lt;c:catch&gt;</code></a></td>
<td align="left">用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-if-tag.html"><code>&lt;c:if&gt;</code></a></td>
<td align="left">与我们在一般程序中用的 if 一样</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:choose&gt;</code></a></td>
<td align="left">本身只当做 <code>&lt;c:when&gt;</code> 和 <code>&lt;c:otherwise&gt;</code> 的父标签</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:when&gt;</code></a></td>
<td align="left"><code>&lt;c:choose&gt;</code> 的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:otherwise&gt;</code></a></td>
<td align="left"><code>&lt;c:choose&gt;</code> 的子标签，接在 <code>&lt;c:when&gt;</code> 标签后，当 <code>&lt;c:when&gt;</code> 标签判断为 false 时被执行</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-import-tag.html"><code>&lt;c:import&gt;</code></a></td>
<td align="left">检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forEach&gt;</code></a></td>
<td align="left">基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forTokens&gt;</code></a></td>
<td align="left">根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-param-tag.html"><code>&lt;c:param&gt;</code></a></td>
<td align="left">用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-redirect-tag.html"><code>&lt;c:redirect&gt;</code></a></td>
<td align="left">重定向至一个新的 URL.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-url-tag.html"><code>&lt;c:url&gt;</code></a></td>
<td align="left">使用可选的查询参数来创造一个 URL</td>
</tr>
</tbody></table>
<h3 id="格式化标签"><a href="#格式化标签" class="headerlink" title="格式化标签"></a>格式化标签</h3><p>JSTL 格式化标签用来格式化并输出文本、日期、时间、数字。引用格式化标签库的语法如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatnumber-tag.html"><code>&lt;fmt:formatNumber&gt;</code></a></td>
<td align="left">使用指定的格式或精度格式化数字</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsenumber-tag.html"><code>&lt;fmt:parseNumber&gt;</code></a></td>
<td align="left">解析一个代表着数字，货币或百分比的字符串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatdate-tag.html"><code>&lt;fmt:formatDate&gt;</code></a></td>
<td align="left">使用指定的风格或模式格式化日期和时间</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsedate-tag.html"><code>&lt;fmt:parseDate&gt;</code></a></td>
<td align="left">解析一个代表着日期或时间的字符串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-bundle-tag.html"><code>&lt;fmt:bundle&gt;</code></a></td>
<td align="left">绑定资源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setlocale-tag.html"><code>&lt;fmt:setLocale&gt;</code></a></td>
<td align="left">指定地区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setbundle-tag.html"><code>&lt;fmt:setBundle&gt;</code></a></td>
<td align="left">绑定资源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-timezone-tag.html"><code>&lt;fmt:timeZone&gt;</code></a></td>
<td align="left">指定时区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-settimezone-tag.html"><code>&lt;fmt:setTimeZone&gt;</code></a></td>
<td align="left">指定时区</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-message-tag.html"><code>&lt;fmt:message&gt;</code></a></td>
<td align="left">显示资源配置文件信息</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-requestencoding-tag.html"><code>&lt;fmt:requestEncoding&gt;</code></a></td>
<td align="left">设置 request 的字符编码</td>
</tr>
</tbody></table>
<h3 id="SQL-标签"><a href="#SQL-标签" class="headerlink" title="SQL 标签"></a>SQL 标签</h3><p>JSTL SQL 标签库提供了与关系型数据库（Oracle，MySQL，SQL Server 等等）进行交互的标签。引用 SQL 标签库的语法如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;sql&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-setdatasource-tag.html"><code>&lt;sql:setDataSource&gt;</code></a></td>
<td align="left">指定数据源</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-query-tag.html"><code>&lt;sql:query&gt;</code></a></td>
<td align="left">运行 SQL 查询语句</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-update-tag.html"><code>&lt;sql:update&gt;</code></a></td>
<td align="left">运行 SQL 更新语句</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-param-tag.html"><code>&lt;sql:param&gt;</code></a></td>
<td align="left">将 SQL 语句中的参数设为指定值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-dateparam-tag.html"><code>&lt;sql:dateParam&gt;</code></a></td>
<td align="left">将 SQL 语句中的日期参数设为指定的 java.util.Date 对象值</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-transaction-tag.html"><code>&lt;sql:transaction&gt;</code></a></td>
<td align="left">在共享数据库连接中提供嵌套的数据库行为元素，将所有语句以一个事务的形式来运行</td>
</tr>
</tbody></table>
<h3 id="XML-标签"><a href="#XML-标签" class="headerlink" title="XML 标签"></a>XML 标签</h3><p>JSTL XML 标签库提供了创建和操作 XML 文档的标签。引用 XML 标签库的语法如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;x&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/xml&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>在使用 xml 标签前，你必须将 XML 和 XPath 的相关包拷贝至你的 <code>&lt;Tomcat 安装目录&gt;\lib</code> 下:</p>
<ul>
<li><p>XercesImpl.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://www.apache.org/dist/xerces/j/">http://www.apache.org/dist/xerces/j/</a></p>
</li>
<li><p>xalan.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://xml.apache.org/xalan-j/index.html">http://xml.apache.org/xalan-j/index.html</a></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-out-tag.html"><code>&lt;x:out&gt;</code></a></td>
<td align="left">与 <code>&lt;%= ... &gt;</code>,类似，不过只用于 XPath 表达式</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-parse-tag.html"><code>&lt;x:parse&gt;</code></a></td>
<td align="left">解析 XML 数据</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-set-tag.html"><code>&lt;x:set&gt;</code></a></td>
<td align="left">设置 XPath 表达式</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-if-tag.html"><code>&lt;x:if&gt;</code></a></td>
<td align="left">判断 XPath 表达式，若为真，则执行本体中的内容，否则跳过本体</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-foreach-tag.html"><code>&lt;x:forEach&gt;</code></a></td>
<td align="left">迭代 XML 文档中的节点</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:choose&gt;</code></a></td>
<td align="left"><code>&lt;x:when&gt;</code> 和 <code>&lt;x:otherwise&gt;</code> 的父标签</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:when&gt;</code></a></td>
<td align="left"><code>&lt;x:choose&gt;</code> 的子标签，用来进行条件判断</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:otherwise&gt;</code></a></td>
<td align="left"><code>&lt;x:choose&gt;</code> 的子标签，当 <code>&lt;x:when&gt;</code> 判断为 false 时被执行</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-transform-tag.html"><code>&lt;x:transform&gt;</code></a></td>
<td align="left">将 XSL 转换应用在 XML 文档中</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-param-tag.html"><code>&lt;x:param&gt;</code></a></td>
<td align="left">与 <code>&lt;x:transform&gt;</code> 共同使用，用于设置 XSL 样式表</td>
</tr>
</tbody></table>
<h3 id="JSTL-函数"><a href="#JSTL-函数" class="headerlink" title="JSTL 函数"></a>JSTL 函数</h3><p>JSTL 包含一系列标准函数，大部分是通用的字符串处理函数。引用 JSTL 函数库的语法如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fn&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-contains.html">fn:contains()</a></td>
<td align="left">测试输入的字符串是否包含指定的子串</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-containsignoreCase.html">fn:containsIgnoreCase()</a></td>
<td align="left">测试输入的字符串是否包含指定的子串，大小写不敏感</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-endswith.html">fn:endsWith()</a></td>
<td align="left">测试输入的字符串是否以指定的后缀结尾</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-escapexml.html">fn:escapeXml()</a></td>
<td align="left">跳过可以作为 XML 标记的字符</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-indexof.html">fn:indexOf()</a></td>
<td align="left">返回指定字符串在输入字符串中出现的位置</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-join.html">fn:join()</a></td>
<td align="left">将数组中的元素合成一个字符串然后输出</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-length.html">fn:length()</a></td>
<td align="left">返回字符串长度</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-replace.html">fn:replace()</a></td>
<td align="left">将输入字符串中指定的位置替换为指定的字符串然后返回</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-split.html">fn:split()</a></td>
<td align="left">将字符串用指定的分隔符分隔然后组成一个子字符串数组并返回</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-startswith.html">fn:startsWith()</a></td>
<td align="left">测试输入字符串是否以指定的前缀开始</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substring.html">fn:substring()</a></td>
<td align="left">返回字符串的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringafter.html">fn:substringAfter()</a></td>
<td align="left">返回字符串在指定子串之后的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringbefore.html">fn:substringBefore()</a></td>
<td align="left">返回字符串在指定子串之前的子集</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-tolowercase.html">fn:toLowerCase()</a></td>
<td align="left">将字符串中的字符转为小写</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-touppercase.html">fn:toUpperCase()</a></td>
<td align="left">将字符串中的字符转为大写</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-trim.html">fn:trim()</a></td>
<td align="left">移除首尾的空白符</td>
</tr>
</tbody></table>
<h2 id="Taglib"><a href="#Taglib" class="headerlink" title="Taglib"></a>Taglib</h2><h3 id="JSP-自定义标签"><a href="#JSP-自定义标签" class="headerlink" title="JSP 自定义标签"></a>JSP 自定义标签</h3><p>自定义标签是用户定义的 JSP 语言元素。当 JSP 页面包含一个自定义标签时将被转化为 servlet，标签转化为对被 称为 tag handler 的对象的操作，即当 servlet 执行时 Web container 调用那些操作。</p>
<p>JSP 标签扩展可以让你创建新的标签并且可以直接插入到一个 JSP 页面。 JSP 2.0 规范中引入 Simple Tag Handlers 来编写这些自定义标记。</p>
<p>你可以继承 SimpleTagSupport 类并重写的 doTag()方法来开发一个最简单的自定义标签。</p>
<h3 id="创建”Hello”标签"><a href="#创建”Hello”标签" class="headerlink" title="创建”Hello”标签"></a>创建”Hello”标签</h3><p>接下来，我们想创建一个自定义标签叫作<a href="ex:Hello">ex:Hello</a>，标签格式为：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;ex:Hello /&gt;</span></span><br></pre></td></tr></table></figure>

<p>要创建自定义的 JSP 标签，你首先必须创建处理标签的 Java 类。所以，让我们创建一个 HelloTag 类，如下所示：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob; <span class="keyword">import</span> javax.servlet.jsp.tagext.*; <span class="keyword">import</span></span><br><span class="line">javax.servlet.jsp.*; <span class="keyword">import</span> java.io.*; public <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span></span></span><br><span class="line"><span class="type">SimpleTagSupport</span> &#123; public void doTag() <span class="keyword">throws</span> <span class="type">JspException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"><span class="type">JspWriter</span> out = getJspContext().getOut(); out.println(<span class="string">&quot;Hello Custom Tag!&quot;</span>); &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>以下代码重写了 doTag()方法，方法中使用了 getJspContext()方法来获取当前的 JspContext 对象，并将”Hello Custom Tag!”传递给 JspWriter 对象。</p>
<p>编译以上类，并将其复制到环境变量 CLASSPATH 目录中。最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code>。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接下来，我们就可以在 JSP 文件中使用 Hello 标签：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ taglib prefix=<span class="string">&quot;ex&quot;</span> uri=<span class="string">&quot;WEB-INF/custom.tld&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ex:Hello</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>以上程序输出结果为：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello Custom <span class="keyword">Tag</span>!</span><br></pre></td></tr></table></figure>

<h3 id="访问标签体"><a href="#访问标签体" class="headerlink" title="访问标签体"></a>访问标签体</h3><p>你可以像标准标签库一样在标签中包含消息内容。如我们要在我们自定义的 Hello 中包含内容，格式如下：</p>
<figure class="highlight mizar"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">ex</span>:Hello&gt;</span><br><span class="line">  This <span class="keyword">is</span> message body</span><br><span class="line">&lt;/<span class="keyword">ex</span>:Hello&gt;</span><br></pre></td></tr></table></figure>

<p>我们可以修改标签处理类文件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span></span><br><span class="line">      <span class="keyword">throws</span> JspException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">       getJspBody().invoke(sw);</span><br><span class="line">       getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来我们需要修改 TLD 文件，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在我们可以在 JSP 使用修改后的标签，如下所示:</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ taglib prefix=<span class="string">&quot;ex&quot;</span> uri=<span class="string">&quot;WEB-INF/custom.tld&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ex:Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is message body</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ex:Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>以上程序输出结果如下所示：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This <span class="keyword">is</span> message <span class="keyword">body</span></span><br></pre></td></tr></table></figure>

<h3 id="自定义标签属性"><a href="#自定义标签属性" class="headerlink" title="自定义标签属性"></a>自定义标签属性</h3><p>你可以在自定义标准中设置各种属性，要接收属性，值自定义标签类必须实现 setter 方法， JavaBean 中的 setter 方法如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.message = msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span></span><br><span class="line">      <span class="keyword">throws</span> JspException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">if</span> (message != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="comment">/* 从属性中使用消息 */</span></span><br><span class="line">          <span class="type">JspWriter</span> <span class="variable">out</span> <span class="operator">=</span> getJspContext().getOut();</span><br><span class="line">          out.println( message );</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">/* 从内容体中使用消息 */</span></span><br><span class="line">          getJspBody().invoke(sw);</span><br><span class="line">          getJspContext().getOut().println(sw.toString());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>属性的名称是”message”，所以 setter 方法是的 setMessage()。现在让我们在 TLD 文件中使用的 <code>&lt;attribute&gt;</code> 元素添加此属性：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>message<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在我们就可以在 JSP 文件中使用 message 属性了，如下所示：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby">@ taglib prefix=<span class="string">&quot;ex&quot;</span> uri=<span class="string">&quot;WEB-INF/custom.tld&quot;</span></span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>A sample custom tag<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ex:Hello</span> <span class="attr">message</span>=<span class="string">&quot;This is custom tag&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>以上实例数据输出结果为：</p>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">This</span> <span class="keyword">is</span> custom <span class="meta">tag</span></span><br></pre></td></tr></table></figure>

<p>你还可以包含以下属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">定义属性的名称。每个标签的是属性名称必须是唯一的。</td>
</tr>
<tr>
<td align="left">required</td>
<td align="left">指定属性是否是必须的或者可选的,如果设置为 false 为可选。</td>
</tr>
<tr>
<td align="left">rtexprvalue</td>
<td align="left">声明在运行表达式时，标签属性是否有效。</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">定义该属性的 Java 类类型 。默认指定为 <strong>String</strong></td>
</tr>
<tr>
<td align="left">description</td>
<td align="left">描述信息</td>
</tr>
<tr>
<td align="left">fragment</td>
<td align="left">如果声明了该属性,属性值将被视为一个 <strong>JspFragment</strong>。</td>
</tr>
</tbody></table>
<p>以下是指定相关的属性实例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Date<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span>&gt;</span>false<span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<p>如果你使用了两个属性，修改 TLD 文件，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Boolean<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span>&gt;</span>false<span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>attribute_name2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">required</span>&gt;</span>true<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Date<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>钝悟 ◾ Dunwu
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://dunwu.github.io/blog/pages/b4ab7a47/" title="JavaWeb 之 Jsp 指南">https://dunwu.github.io/blog/pages/b4ab7a47/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/blog/tags/Java/" rel="tag"># Java</a>
              <a href="/blog/tags/JavaWeb/" rel="tag"># JavaWeb</a>
              <a href="/blog/tags/JSP/" rel="tag"># JSP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/pages/07fe1296/" rel="prev" title="JavaWeb 面经">
                  <i class="fa fa-angle-left"></i> JavaWeb 面经
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/pages/c02058fe/" rel="next" title="Nosql 技术选型">
                  Nosql 技术选型 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2015 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">钝悟 ◾ Dunwu</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">4.5m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">68:08</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/dunwu/blog" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"dunwu","repo":"blog","client_id":"c45bc13ca1d3d3aa4836","client_secret":"1907a9f0c22087badad3938e1d7dcba9078f88ac","admin_user":"dunwu","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"95d12eb9eebda0dac72fb8179c7b81c4"}</script>
<script src="/blog/js/third-party/comments/gitalk.js" defer></script>

</body>
</html>
