---
title: Gitå¸®åŠ©æ‰‹å†Œ
date: 2021-04-16 18:19:18
order: 02
categories:
  - DevOps
  - å·¥å…·
  - Git
tags:
  - DevOps
  - Git
permalink: /pages/09397d/
---

# Git å¸®åŠ©æ‰‹å†Œ

å›½å¤–ç½‘å‹åˆ¶ä½œäº†ä¸€å¼  Git Cheat Sheetï¼Œæ€»ç»“å¾ˆç²¾ç‚¼ï¼Œå„ä½ä¸å¦¨æ”¶è—ä¸€ä¸‹ã€‚

æœ¬èŠ‚é€‰æ‹©æ€§ä»‹ç» git ä¸­æ¯”è¾ƒå¸¸ç”¨çš„å‘½ä»¤è¡Œåœºæ™¯ã€‚

![img](https://raw.githubusercontent.com/dunwu/images/master/cs/web/git/git-cheat-sheet.png)

## å®‰è£…

**ï¼ˆ1ï¼‰Debian/Ubuntu ç¯å¢ƒå®‰è£…**

å¦‚æœä½ ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯ Debian/Ubuntu ï¼Œ å®‰è£…å‘½ä»¤ä¸ºï¼š

```shell
$ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \
> libz-dev libssl-dev
$ apt-get install git-core
$ git --version
git version 1.8.1.2
```

**ï¼ˆ2ï¼‰Centos/RedHat ç¯å¢ƒå®‰è£…**

å¦‚æœä½ ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯ Centos/RedHat ï¼Œå®‰è£…å‘½ä»¤ä¸ºï¼š

```shell
$ yum install curl-devel expat-devel gettext-devel \
> openssl-devel zlib-devel
$ yum -y install git-core
$ git --version
git version 1.7.1
```

**ï¼ˆ3ï¼‰Windows ç¯å¢ƒå®‰è£…**

åœ¨[Git å®˜æ–¹ä¸‹è½½åœ°å€](https://git-scm.com/downloads)ä¸‹è½½ exe å®‰è£…åŒ…ã€‚æŒ‰ç…§å®‰è£…å‘å¯¼å®‰è£…å³å¯ã€‚

å»ºè®®å®‰è£… Git Bash è¿™ä¸ª git çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

**ï¼ˆ4ï¼‰Mac ç¯å¢ƒå®‰è£…**

åœ¨[Git å®˜æ–¹ä¸‹è½½åœ°å€](https://git-scm.com/downloads)ä¸‹è½½ mac å®‰è£…åŒ…ã€‚æŒ‰ç…§å®‰è£…å‘å¯¼å®‰è£…å³å¯ã€‚

## é…ç½®

Git è‡ªå¸¦ä¸€ä¸ª `git config` çš„å·¥å…·æ¥å¸®åŠ©è®¾ç½®æ§åˆ¶ Git å¤–è§‚å’Œè¡Œä¸ºçš„é…ç½®å˜é‡ã€‚ è¿™äº›å˜é‡å­˜å‚¨åœ¨ä¸‰ä¸ªä¸åŒçš„ä½ç½®ï¼š

- `/etc/gitconfig` æ–‡ä»¶: åŒ…å«ç³»ç»Ÿä¸Šæ¯ä¸€ä¸ªç”¨æˆ·åŠä»–ä»¬ä»“åº“çš„é€šç”¨é…ç½®ã€‚ å¦‚æœä½¿ç”¨å¸¦æœ‰ `--system` é€‰é¡¹çš„ `git config` æ—¶ï¼Œå®ƒä¼šä»æ­¤æ–‡ä»¶è¯»å†™é…ç½®å˜é‡ã€‚
- `~/.gitconfig` æˆ– `~/.config/git/config` æ–‡ä»¶ï¼šåªé’ˆå¯¹å½“å‰ç”¨æˆ·ã€‚ å¯ä»¥ä¼ é€’ `--global` é€‰é¡¹è®© Git è¯»å†™æ­¤æ–‡ä»¶ã€‚
- å½“å‰ä½¿ç”¨ä»“åº“çš„ Git ç›®å½•ä¸­çš„ `config` æ–‡ä»¶ï¼ˆå°±æ˜¯ `.git/config`ï¼‰ï¼šé’ˆå¯¹è¯¥ä»“åº“ã€‚

æ¯ä¸€ä¸ªçº§åˆ«è¦†ç›–ä¸Šä¸€çº§åˆ«çš„é…ç½®ï¼Œæ‰€ä»¥ `.git/config` çš„é…ç½®å˜é‡ä¼šè¦†ç›– `/etc/gitconfig` ä¸­çš„é…ç½®å˜é‡ã€‚

åœ¨ Windows ç³»ç»Ÿä¸­ï¼ŒGit ä¼šæŸ¥æ‰¾ `$HOME` ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ `C:\Users\$USER`ï¼‰çš„ `.gitconfig` æ–‡ä»¶ã€‚ Git åŒæ ·ä¹Ÿä¼šå¯»æ‰¾ `/etc/gitconfig` æ–‡ä»¶ï¼Œä½†åªé™äº MSys çš„æ ¹ç›®å½•ä¸‹ï¼Œå³å®‰è£… Git æ—¶æ‰€é€‰çš„ç›®æ ‡ä½ç½®ã€‚

### é…ç½®ç”¨æˆ·ä¿¡æ¯

å½“å®‰è£…å®Œ Git åº”è¯¥åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è®¾ç½®ä½ çš„ç”¨æˆ·åç§°ä¸é‚®ä»¶åœ°å€ã€‚ è¿™æ ·åšå¾ˆé‡è¦ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Git çš„æäº¤éƒ½ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”å®ƒä¼šå†™å…¥åˆ°ä½ çš„æ¯ä¸€æ¬¡æäº¤ä¸­ï¼Œä¸å¯æ›´æ”¹ï¼š

```shell
git config --global user.name "John Doe"
git config --global user.email johndoe@example.com
```

å†æ¬¡å¼ºè°ƒï¼Œå¦‚æœä½¿ç”¨äº† `--global` é€‰é¡¹ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤åªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åæ— è®ºä½ åœ¨è¯¥ç³»ç»Ÿä¸Šåšä»»ä½•äº‹æƒ…ï¼Œ Git éƒ½ä¼šä½¿ç”¨é‚£äº›ä¿¡æ¯ã€‚ å½“ä½ æƒ³é’ˆå¯¹ç‰¹å®šé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åç§°ä¸é‚®ä»¶åœ°å€æ—¶ï¼Œå¯ä»¥åœ¨é‚£ä¸ªé¡¹ç›®ç›®å½•ä¸‹è¿è¡Œæ²¡æœ‰ `--global` é€‰é¡¹çš„å‘½ä»¤æ¥é…ç½®ã€‚

å¾ˆå¤š GUI å·¥å…·éƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶å¸®åŠ©ä½ é…ç½®è¿™äº›ä¿¡æ¯ã€‚

### ç»™ Git å‘½ä»¤æ·»åŠ åˆ«å

åœ¨ OS X å’Œ Linux ä¸‹, ä½ çš„ Git çš„é…ç½®æ–‡ä»¶å‚¨å­˜åœ¨ `~/.gitconfig`ã€‚æˆ‘åœ¨`[alias]` éƒ¨åˆ†æ·»åŠ äº†ä¸€äº›å¿«æ·åˆ«å(å’Œä¸€äº›æˆ‘å®¹æ˜“æ‹¼å†™é”™è¯¯çš„)ï¼Œå¦‚ä¸‹:

```vim
[alias]
    a = add
    amend = commit --amend
    c = commit
    ca = commit --amend
    ci = commit -a
    co = checkout
    d = diff
    dc = diff --changed
    ds = diff --staged
    f = fetch
    loll = log --graph --decorate --pretty=oneline --abbrev-commit
    m = merge
    one = log --pretty=oneline
    outstanding = rebase -i @{u}
    s = status
    unpushed = log @{u}
    wc = whatchanged
    wip = rebase -i @{u}
    zap = fetch -p
```

### ç¼“å­˜ä¸€ä¸ªä»“åº“çš„ç”¨æˆ·åå’Œå¯†ç 

ä½ å¯èƒ½æœ‰ä¸€ä¸ªä»“åº“éœ€è¦æˆæƒï¼Œè¿™æ—¶ä½ å¯ä»¥ç¼“å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ¨/æ‹‰(push/pull)çš„æ—¶å€™éƒ½è¾“å…¥ï¼ŒCredential helper èƒ½å¸®ä½ ã€‚

```shell
git config --global credential.helper cache
## Set git to use the credential memory cache
```

```shell
git config --global credential.helper 'cache --timeout=3600'
## Set the cache to timeout after 1 hour (setting is in seconds)
```

## ä»“åº“

### åˆå§‹åŒ–ä»“åº“

```shell
$ git init
```

### å…‹éš†ä»“åº“

```bash
# é€šè¿‡ SSH
$ git clone ssh://user@domain.com/repo.git
# é€šè¿‡ HTTP
$ git clone http://domain.com/user/repo.git
```

## å‚¨è—

æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŒä¸€ä¸ªé¡¹ç›®çš„ä¸åŒåˆ†æ”¯ä¸Šå·¥ä½œã€‚å½“éœ€è¦åˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œååæœ¬åœ°çš„å·¥ä½œè¿˜æ²¡æœ‰å®Œæˆï¼Œæ­¤æ—¶ï¼Œæäº¤ä¿®æ”¹æ˜¾å¾—ä¸ä¸¥è°¨ï¼Œä½†æ˜¯ä¸æäº¤ä»£ç åˆæ— æ³•åˆ‡æ¢åˆ†æ”¯ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `git stash` å°†æœ¬åœ°çš„ä¿®æ”¹å†…å®¹ä½œä¸ºè‰ç¨¿å‚¨è—èµ·æ¥ã€‚

å®˜æ–¹ç§°ä¹‹ä¸ºå‚¨è—ï¼Œä½†æˆ‘ä¸ªäººæ›´å–œæ¬¢ç§°ä¹‹ä¸ºå­˜è‰ç¨¿ã€‚

```shell
# 1. å°†ä¿®æ”¹ä½œä¸ºå½“å‰åˆ†æ”¯çš„è‰ç¨¿ä¿å­˜
$ git stash

# 2. æŸ¥çœ‹è‰ç¨¿åˆ—è¡¨
$ git stash list
stash@{0}: WIP on master: 6fae349 :memo: Writing docs.

# 3.1 åˆ é™¤è‰ç¨¿
$ git stash drop stash@{0}

# 3.2 è¯»å–è‰ç¨¿
$ git stash apply stash@{0}
```

## æš‚å­˜

`git add` å‘½ä»¤ç”¨äºå°†ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºã€‚

### æš‚å­˜æŒ‡å®šæ–‡ä»¶

```shell
git add xxx
```

### æš‚å­˜å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä¿®æ”¹

```shell
git add .
```

### æš‚å­˜æ‰€æœ‰ä¿®æ”¹

```
git add -A
```

### æš‚å­˜æ–‡ä»¶éƒ¨åˆ†å†…å®¹

æš‚å­˜æ–‡ä»¶éƒ¨åˆ†å†…å®¹

```shell
git add --patch filename.x
```

`-p` ç®€å†™ã€‚è¿™ä¼šæ‰“å¼€äº¤äº’æ¨¡å¼ï¼Œ ä½ å°†èƒ½å¤Ÿç”¨ `s` é€‰é¡¹æ¥åˆ†éš”æäº¤(commit)ï¼›

ç„¶è€Œ, å¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯æ–°çš„, ä¼šæ²¡æœ‰è¿™ä¸ªé€‰æ‹©ï¼Œ æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œè¿™æ ·åš:

```shell
git add -N filename.x
```

ç„¶å, ä½ éœ€è¦ç”¨ `e` é€‰é¡¹æ¥æ‰‹åŠ¨é€‰æ‹©éœ€è¦æ·»åŠ çš„è¡Œï¼Œæ‰§è¡Œ `git diff --cached` å°†ä¼šæ˜¾ç¤ºå“ªäº›è¡Œæš‚å­˜äº†å“ªäº›è¡Œåªæ˜¯ä¿å­˜åœ¨æœ¬åœ°äº†ã€‚

### æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥

è¿™ä¸ªæœ‰ç‚¹å›°éš¾ï¼Œ æˆ‘èƒ½æƒ³åˆ°çš„æœ€å¥½çš„æ–¹æ³•æ˜¯å…ˆ stash æœªæš‚å­˜çš„å†…å®¹ï¼Œ ç„¶åé‡ç½®(reset)ï¼Œå† pop ç¬¬ä¸€æ­¥ stashed çš„å†…å®¹, æœ€åå† add å®ƒä»¬ã€‚

```shell
git stash -k
git reset --hard
git stash pop
git add -A
```

## æäº¤

`git commit` å‘½ä»¤ç”¨äºå°†ä¿®æ”¹ä¿å­˜åˆ°åˆ°æœ¬åœ°ä»“åº“ã€‚

### æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡æäº¤

```shell
git show
```

æˆ–è€…

```shell
git log -n1 -p
```

### æäº¤æœ¬åœ°çš„æ‰€æœ‰ä¿®æ”¹

```shell
git commit -a
```

### æäº¤æš‚å­˜çš„ä¿®æ”¹

```shell
git commit
```

### æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤

```shell
git commit --amend
```

### é™„åŠ æ¶ˆæ¯æäº¤

```shell
git commit -m 'commit message'
```

### ä¿®æ”¹æäº¤ä¿¡æ¯

å¦‚æœä½ çš„æäº¤ä¿¡æ¯å†™é”™äº†ä¸”è¿™æ¬¡æäº¤ï¼ˆcommitï¼‰è¿˜æ²¡æœ‰æ¨é€ï¼ˆpushï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ï¼š

```shell
git commit --amend
```

æˆ–è€…

```shell
git commit --amend -m 'xxxxxxx'
```

### ä¿®æ”¹æäº¤ä¿¡æ¯ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±

```shell
git commit --amend --author "New Authorname <authoremail@mydomain.com>"
```

### ä»æäº¤ä¸­ç§»é™¤ä¸€ä¸ªæ–‡ä»¶

```shell
git checkout HEAD^ myfile
git add -A
git commit --amend
```

### åˆ é™¤æœ€åä¸€æ¬¡æäº¤

å¦‚æœä½ éœ€è¦åˆ é™¤æ¨äº†çš„æäº¤(pushed commits)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚å¯æ˜¯ï¼Œè¿™ä¼šä¸å¯é€†çš„æ”¹å˜ä½ çš„å†å²ï¼Œä¹Ÿä¼šæä¹±é‚£äº›å·²ç»ä»è¯¥ä»“åº“æ‹‰å–(pulled)äº†çš„äººçš„å†å²ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆç¡®å®šï¼Œåƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚

```shell
git reset HEAD^ --hard
git push -f [remote] [branch]
```

å¦‚æœä½ è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹, æŠŠ Git é‡ç½®(reset)åˆ°ä½ æœ€åä¸€æ¬¡æäº¤å‰çš„çŠ¶æ€å°±å¯ä»¥äº†(åŒæ—¶ä¿å­˜æš‚å­˜çš„å˜åŒ–):

```shell
(my-branch*)$ git reset --soft HEAD@{1}

```

è¿™åªèƒ½åœ¨æ²¡æœ‰æ¨é€ä¹‹å‰æœ‰ç”¨. å¦‚æœä½ å·²ç»æ¨äº†, å”¯ä¸€å®‰å…¨èƒ½åšçš„æ˜¯ `git revert SHAofBadCommit`ï¼Œ é‚£ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤(commit)ç”¨äºæ’¤æ¶ˆå‰ä¸€ä¸ªæäº¤çš„æ‰€æœ‰å˜åŒ–(changes)ï¼› æˆ–è€…, å¦‚æœä½ æ¨çš„è¿™ä¸ªåˆ†æ”¯æ˜¯ rebase-safe çš„ (ä¾‹å¦‚ï¼š å…¶å®ƒå¼€å‘è€…ä¸ä¼šä»è¿™ä¸ªåˆ†æ”¯æ‹‰), åªéœ€è¦ä½¿ç”¨ `git push -f`ï¼› æ›´å¤š, è¯·å‚è€ƒ [the above section](#deleteremove-last-pushed-commit)ã€‚

### åˆ é™¤ä»»æ„æäº¤

åŒæ ·çš„è­¦å‘Šï¼šä¸åˆ°ä¸‡ä¸å¾—å·²çš„æ—¶å€™ä¸è¦è¿™ä¹ˆåš.

```shell
git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT
git push -f [remote] [branch]
```

æˆ–è€…åšä¸€ä¸ª [äº¤äº’å¼ rebase](#interactive-rebase) åˆ é™¤é‚£äº›ä½ æƒ³è¦åˆ é™¤çš„æäº¤(commit)é‡Œæ‰€å¯¹åº”çš„è¡Œã€‚

### æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™

```shell
To https://github.com/yourusername/repo.git
! [rejected]        mybranch -> mybranch (non-fast-forward)
error: failed to push some refs to 'https://github.com/tanay1337/webmaker.org.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

æ³¨æ„, rebasing(è§ä¸‹é¢)å’Œä¿®æ­£(amending)ä¼šç”¨ä¸€ä¸ª**æ–°çš„æäº¤(commit)ä»£æ›¿æ—§çš„**, æ‰€ä»¥å¦‚æœä¹‹å‰ä½ å·²ç»å¾€è¿œç¨‹ä»“åº“ä¸Šæ¨è¿‡ä¸€æ¬¡ä¿®æ­£å‰çš„æäº¤(commit)ï¼Œé‚£ä½ ç°åœ¨å°±å¿…é¡»å¼ºæ¨(force push) (`-f`)ã€‚ æ³¨æ„ &ndash; _æ€»æ˜¯_ ç¡®ä¿ä½ æŒ‡æ˜ä¸€ä¸ªåˆ†æ”¯!

```shell
(my-branch)$ git push origin mybranch -f
```

ä¸€èˆ¬æ¥è¯´, **è¦é¿å…å¼ºæ¨**. æœ€å¥½æ˜¯åˆ›å»ºå’Œæ¨(push)ä¸€ä¸ªæ–°çš„æäº¤(commit)ï¼Œè€Œä¸æ˜¯å¼ºæ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤ã€‚åè€…ä¼šä½¿é‚£äº›ä¸è¯¥åˆ†æ”¯æˆ–è¯¥åˆ†æ”¯çš„å­åˆ†æ”¯å·¥ä½œçš„å¼€å‘è€…ï¼Œåœ¨æºå†å²ä¸­äº§ç”Ÿå†²çªã€‚

### ä¸å°å¿ƒå¼ºåˆ¶é‡ç½®ï¼Œæƒ³æ‰¾å›å†…å®¹

å¦‚æœä½ æ„å¤–çš„åšäº† `git reset --hard`, ä½ é€šå¸¸èƒ½æ‰¾å›ä½ çš„æäº¤(commit), å› ä¸º Git å¯¹æ¯ä»¶äº‹éƒ½ä¼šæœ‰æ—¥å¿—ï¼Œä¸”éƒ½ä¼šä¿å­˜å‡ å¤©ã€‚

```shell
(master)$ git reflog
```

ä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä½ è¿‡å»æäº¤(commit)çš„åˆ—è¡¨, å’Œä¸€ä¸ªé‡ç½®çš„æäº¤ã€‚ é€‰æ‹©ä½ æƒ³è¦å›åˆ°çš„æäº¤(commit)çš„ SHAï¼Œå†é‡ç½®ä¸€æ¬¡:

```shell
(master)$ git reset --hard SHA1234
```

è¿™æ ·å°±å®Œæˆäº†ã€‚

## é‡ç½®

æ’¤é”€æœ¬åœ°ä¿®æ”¹ï¼š

```shell
# ç§»é™¤ç¼“å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶ï¼ˆi.e. æ’¤é”€ä¸Šæ¬¡git addï¼‰
$ git reset HEAD

# å°†HEADé‡ç½®åˆ°ä¸Šä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬ï¼Œå¹¶å°†ä¹‹åçš„ä¿®æ”¹æ ‡è®°ä¸ºæœªæ·»åŠ åˆ°ç¼“å­˜åŒºçš„ä¿®æ”¹
$ git reset <commit>

# å°†HEADé‡ç½®åˆ°ä¸Šä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬ï¼Œå¹¶ä¿ç•™æœªæäº¤çš„æœ¬åœ°ä¿®æ”¹
$ git reset --keep <commit>

# æ”¾å¼ƒå·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹
$ git reset --hard HEAD

# å°†HEADé‡ç½®åˆ°æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¹¶æŠ›å¼ƒè¯¥ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ä¿®æ”¹
$ git reset --hard <commit-hash>

# ç”¨è¿œç«¯åˆ†æ”¯å¼ºåˆ¶è¦†ç›–æœ¬åœ°åˆ†æ”¯
$ git reset --hard <remote/branch> e.g., upstream/master, origin/my-feature

# æ”¾å¼ƒæŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰æœ¬åœ°ä¿®æ”¹
$ git checkout HEAD <file>
```

åˆ é™¤æ·»åŠ `.gitignore`æ–‡ä»¶å‰é”™è¯¯æäº¤çš„æ–‡ä»¶ï¼š

```shell
# æäº¤ä¸€æ¡ git è®°å½•ï¼Œæäº¤ä¿¡æ¯ä¸º remove xyz file
$ git rm -r --cached .
$ git add .
$ git commit -m "remove xyz file"
```

æ’¤é”€è¿œç¨‹ä¿®æ”¹ï¼ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œå¹¶å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼‰ï¼š

```shell
# revert å“ˆå¸Œå·ä¸º commit-hash çš„è®°å½•
$ git revert <commit-hash>
```

å½»åº•åˆ é™¤æŒ‡å®šç‰ˆæœ¬ï¼š

```shell
# æ‰§è¡Œä¸‹é¢å‘½ä»¤åï¼Œcommit-hash æäº¤åçš„è®°å½•éƒ½ä¼šè¢«å½»åº•åˆ é™¤ï¼Œä½¿ç”¨éœ€è°¨æ…
$ git reset --hard <commit-hash>
$ git push -f
```

## æ›´æ–°

```shell
# ä¸‹è½½è¿œç¨‹ç«¯ç‰ˆæœ¬ï¼Œä½†ä¸åˆå¹¶åˆ°HEADä¸­
$ git fetch <remote>

# å°†è¿œç¨‹ç«¯ç‰ˆæœ¬åˆå¹¶åˆ°æœ¬åœ°ç‰ˆæœ¬ä¸­
$ git pull origin master

# ä»¥rebaseæ–¹å¼å°†è¿œç«¯åˆ†æ”¯ä¸æœ¬åœ°åˆå¹¶
$ git pull --rebase <remote> <branch>
```

## æ¨é€

### æ¨é€æäº¤åˆ°è¿œç¨‹ä»“åº“

```shell
git push remote <remote> <branch>
```

### å‘å¸ƒæ ‡ç­¾

```shell
git push --tags
```

## æœªæš‚å­˜

> æœªæš‚å­˜(Unstaged)çš„å†…å®¹

### æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯

- `git checkout -b my-branch`

### æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯

```shell
git stash
git checkout my-branch
git stash pop
```

### ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–

å¦‚æœä½ åªæ˜¯æƒ³é‡ç½®æº(origin)å’Œä½ æœ¬åœ°(local)ä¹‹é—´çš„ä¸€äº›æäº¤(commit)ï¼Œä½ å¯ä»¥ï¼š

```shell
## one commit
$ git reset --hard HEAD^
## two commits
$ git reset --hard HEAD^^
## four commits
$ git reset --hard HEAD~4
## or
$ git checkout -f
```

é‡ç½®æŸä¸ªç‰¹æ®Šçš„æ–‡ä»¶, ä½ å¯ä»¥ç”¨æ–‡ä»¶ååšä¸ºå‚æ•°:

```shell
git reset filename
```

### æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹

å¦‚æœä½ æƒ³ä¸¢å¼ƒå·¥ä½œæ‹·è´ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ã€‚

ç­¾å‡º(checkout)ä¸éœ€è¦çš„å†…å®¹ï¼Œä¿ç•™éœ€è¦çš„ã€‚

```shell
$ git checkout -p
## Answer y to all of the snippets you want to drop
```

å¦å¤–ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ `stash`ï¼Œ Stash æ‰€æœ‰è¦ä¿ç•™ä¸‹çš„å†…å®¹, é‡ç½®å·¥ä½œæ‹·è´, é‡æ–°åº”ç”¨ä¿ç•™çš„éƒ¨åˆ†ã€‚

```shell
$ git stash -p
## Select all of the snippets you want to save
$ git reset --hard
$ git stash pop
```

æˆ–è€…, stash ä½ ä¸éœ€è¦çš„éƒ¨åˆ†, ç„¶å stash dropã€‚

```shell
$ git stash -p
## Select all of the snippets you don't want to save
$ git stash drop
```

## åˆ†æ”¯

> åˆ†æ”¯(Branches)

### åˆ—å‡ºæ‰€æœ‰çš„åˆ†æ”¯

```bash
git branch
```

### åˆ—å‡ºæ‰€æœ‰çš„è¿œç«¯åˆ†æ”¯

```bash
git branch -r
```

### åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯

```bash
git branch <new-branch>
```

### åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯

```bash
git branch --track <new-branch> <remote-branch>
```

### åˆ é™¤æœ¬åœ°åˆ†æ”¯

```bash
git branch -d <branch>
```

### å¼ºåˆ¶åˆ é™¤æœ¬åœ°åˆ†æ”¯

> æ³¨æ„ï¼šå¼ºåˆ¶åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼Œå°†ä¼šä¸¢å¤±æœªåˆå¹¶çš„ä¿®æ”¹

```bash
git branch -D <branch>
```

### åˆ é™¤è¿œç¨‹åˆ†æ”¯

```bash
git push <remote> :<branch> (since Git v1.5.0)
git push <remote> --delete <branch> (since Git v1.7.0)
```

### åˆ‡æ¢åˆ†æ”¯

```bash
git checkout <branch>
```

### åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯

```bash
git checkout -b <branch>
```

### æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯

è¿™æ˜¯å¦å¤–ä¸€ç§ä½¿ç”¨ `git reflog` æƒ…å†µï¼Œæ‰¾åˆ°åœ¨è¿™æ¬¡é”™è¯¯æ‹‰(pull) ä¹‹å‰ HEAD çš„æŒ‡å‘ã€‚

```shell
(master)$ git reflog
ab7555f HEAD@{0}: pull origin wrong-branch: Fast-forward
c5bc55a HEAD@{1}: checkout: checkout message goes here
```

é‡ç½®åˆ†æ”¯åˆ°ä½ æ‰€éœ€çš„æäº¤(desired commit):

```shell
git reset --hard c5bc55a
```

å®Œæˆã€‚

### æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´

å…ˆç¡®è®¤ä½ æ²¡æœ‰æ¨(push)ä½ çš„å†…å®¹åˆ°è¿œç¨‹ã€‚

`git status` ä¼šæ˜¾ç¤ºä½ é¢†å…ˆ(ahead)æº(origin)å¤šå°‘ä¸ªæäº¤:

```shell
(my-branch)$ git status
## On branch my-branch
## Your branch is ahead of 'origin/my-branch' by 2 commits.
##   (use "git push" to publish your local commits)
#
```

ä¸€ç§æ–¹æ³•æ˜¯:

```shell
(master)$ git reset --hard origin/my-branch
```

### æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº† master

åœ¨ master ä¸‹åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¸åˆ‡æ¢åˆ°æ–°åˆ†æ”¯,ä»åœ¨ master ä¸‹:

```shell
(master)$ git branch my-branch
```

æŠŠ master åˆ†æ”¯é‡ç½®åˆ°å‰ä¸€ä¸ªæäº¤:

```shell
(master)$ git reset --hard HEAD^
```

`HEAD^` æ˜¯ `HEAD^1` çš„ç®€å†™ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¦è®¾ç½®çš„`HEAD`æ¥è¿›ä¸€æ­¥é‡ç½®ã€‚

æˆ–è€…, å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ `HEAD^`, æ‰¾åˆ°ä½ æƒ³é‡ç½®åˆ°çš„æäº¤(commit)çš„ hash(`git log` èƒ½å¤Ÿå®Œæˆ)ï¼Œ ç„¶åé‡ç½®åˆ°è¿™ä¸ª hashã€‚ ä½¿ç”¨`git push` åŒæ­¥å†…å®¹åˆ°è¿œç¨‹ã€‚

ä¾‹å¦‚, master åˆ†æ”¯æƒ³é‡ç½®åˆ°çš„æäº¤çš„ hash ä¸º`a13b85e`:

```shell
(master)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç­¾å‡º(checkout)åˆšæ‰æ–°å»ºçš„åˆ†æ”¯ç»§ç»­å·¥ä½œ:

```shell
(master)$ git checkout my-branch
```

### æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ª ref-ish çš„æ•´ä¸ªæ–‡ä»¶

å‡è®¾ä½ æ­£åœ¨åšä¸€ä¸ªåŸå‹æ–¹æ¡ˆ(åŸæ–‡ä¸º working spike (see note)), æœ‰æˆç™¾çš„å†…å®¹ï¼Œæ¯ä¸ªéƒ½å·¥ä½œå¾—å¾ˆå¥½ã€‚ç°åœ¨, ä½ æäº¤åˆ°äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œä¿å­˜å·¥ä½œå†…å®¹:

```shell
(solution)$ git add -A && git commit -m "Adding all changes from this spike into one big commit."
```

å½“ä½ æƒ³è¦æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œ (å¯èƒ½æ˜¯`feature`, æˆ–è€… `develop`), ä½ å…³å¿ƒæ˜¯ä¿æŒæ•´ä¸ªæ–‡ä»¶çš„å®Œæ•´ï¼Œä½ æƒ³è¦ä¸€ä¸ªå¤§çš„æäº¤åˆ†éš”æˆæ¯”è¾ƒå°ã€‚

å‡è®¾ä½ æœ‰:

- åˆ†æ”¯ `solution`, æ‹¥æœ‰åŸå‹æ–¹æ¡ˆï¼Œ é¢†å…ˆ `develop` åˆ†æ”¯ã€‚
- åˆ†æ”¯ `develop`, åœ¨è¿™é‡Œä½ åº”ç”¨åŸå‹æ–¹æ¡ˆçš„ä¸€äº›å†…å®¹ã€‚

æˆ‘å»å¯ä»¥é€šè¿‡æŠŠå†…å®¹æ‹¿åˆ°ä½ çš„åˆ†æ”¯é‡Œï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜:

```shell
(develop)$ git checkout solution -- file1.txt
```

è¿™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹ä»åˆ†æ”¯ `solution` æ‹¿åˆ°åˆ†æ”¯ `develop` é‡Œæ¥:

```shell
## On branch develop
## Your branch is up-to-date with 'origin/develop'.
## Changes to be committed:
##  (use "git reset HEAD <file>..." to unstage)
#
##        modified:   file1.txt
```

ç„¶å, æ­£å¸¸æäº¤ã€‚

Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. \~ [Wikipedia](https://en.wikipedia.org/wiki/Extreme_programming_practices).

### æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ

å‡è®¾ä½ æœ‰ä¸€ä¸ª`master`åˆ†æ”¯ï¼Œ æ‰§è¡Œ`git log`, ä½ çœ‹åˆ°ä½ åšè¿‡ä¸¤æ¬¡æäº¤:

```shell
(master)$ git log

commit e3851e817c451cc36f2e6f3049db528415e3c114
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:27 2014 -0400

    Bug #21 - Added CSRF protection

commit 5ea51731d150f7ddc4a365437931cd8be3bf3131
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:12 2014 -0400

    Bug #14 - Fixed spacing on title

commit a13b85e984171c6e2a1729bb061994525f626d14
Author: Aki Rose <akirose@example.com>
Date:   Tue Jul 21 01:12:48 2014 -0400

    First commit
```

è®©æˆ‘ä»¬ç”¨æäº¤ hash(commit hash)æ ‡è®° bug (`e3851e8` for #21, `5ea5173` for #14).

é¦–å…ˆ, æˆ‘ä»¬æŠŠ`master`åˆ†æ”¯é‡ç½®åˆ°æ­£ç¡®çš„æäº¤(`a13b85e`):

```shell
(master)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç°åœ¨, æˆ‘ä»¬å¯¹ bug #21 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯:

```shell
(master)$ git checkout -b 21
(21)$
```

æ¥ç€, æˆ‘ä»¬ç”¨ _cherry-pick_ æŠŠå¯¹ bug #21 çš„æäº¤æ”¾å…¥å½“å‰åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†åº”ç”¨(apply)è¿™ä¸ªæäº¤(commit)ï¼Œä»…ä»…è¿™ä¸€ä¸ªæäº¤(commit)ï¼Œç›´æ¥åœ¨ HEAD ä¸Šé¢ã€‚

```shell
(21)$ git cherry-pick e3851e8
```

è¿™æ—¶å€™, è¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œ å‚è§[äº¤äº’å¼ rebasing ç« ](#interactive-rebase) [**å†²çªèŠ‚**](#merge-conflict) è§£å†³å†²çª.

å†è€…ï¼Œ æˆ‘ä»¬ä¸º bug #14 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯, ä¹ŸåŸºäº`master`åˆ†æ”¯

```shell
(21)$ git checkout master
(master)$ git checkout -b 14
(14)$
```

æœ€å, ä¸º bug #14 æ‰§è¡Œ `cherry-pick`:

```shell
(14)$ git cherry-pick 5ea5173
```

### æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯

ä¸€æ—¦ä½ åœ¨ github ä¸Šé¢åˆå¹¶(merge)äº†ä¸€ä¸ª pull request, ä½ å°±å¯ä»¥åˆ é™¤ä½  fork é‡Œè¢«åˆå¹¶çš„åˆ†æ”¯ã€‚ å¦‚æœä½ ä¸å‡†å¤‡ç»§ç»­åœ¨è¿™ä¸ªåˆ†æ”¯é‡Œå·¥ä½œ, åˆ é™¤è¿™ä¸ªåˆ†æ”¯çš„æœ¬åœ°æ‹·è´ä¼šæ›´å¹²å‡€ï¼Œä½¿ä½ ä¸ä¼šé™·å…¥å·¥ä½œåˆ†æ”¯å’Œä¸€å †é™ˆæ—§åˆ†æ”¯çš„æ··ä¹±ä¹‹ä¸­ã€‚

```shell
git fetch -p
```

### æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯

å¦‚æœä½ å®šæœŸæ¨é€åˆ°è¿œç¨‹, å¤šæ•°æƒ…å†µä¸‹åº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œä½†æœ‰äº›æ—¶å€™è¿˜æ˜¯å¯èƒ½åˆ é™¤äº†è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹çš„åˆ†æ”¯ã€‚ è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶:

```shell
(master)$ git checkout -b my-branch
(my-branch)$ git branch
(my-branch)$ touch foo.txt
(my-branch)$ ls
README.md foo.txt
```

æ·»åŠ æ–‡ä»¶å¹¶åšä¸€æ¬¡æäº¤

```shell
(my-branch)$ git add .
(my-branch)$ git commit -m 'foo.txt added'
(my-branch)$ foo.txt added
 1 files changed, 1 insertions(+)
 create mode 100644 foo.txt
(my-branch)$ git log

commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012
Author: siemiatj <siemiatj@example.com>
Date:   Wed Jul 30 00:34:10 2014 +0200

    foo.txt added

commit 69204cdf0acbab201619d95ad8295928e7f411d5
Author: Kate Hudson <katehudson@example.com>
Date:   Tue Jul 29 13:14:46 2014 -0400

    Fixes #6: Force pushing after amending commits
```

ç°åœ¨æˆ‘ä»¬åˆ‡å›åˆ°ä¸»(master)åˆ†æ”¯ï¼Œâ€˜ä¸å°å¿ƒçš„â€™åˆ é™¤`my-branch`åˆ†æ”¯

```shell
(my-branch)$ git checkout master
Switched to branch 'master'
Your branch is up-to-date with 'origin/master'.
(master)$ git branch -D my-branch
Deleted branch my-branch (was 4e3cd85).
(master)$ echo oh noes, deleted my branch!
oh noes, deleted my branch!
```

åœ¨è¿™æ—¶å€™ä½ åº”è¯¥æƒ³èµ·äº†`reflog`, ä¸€ä¸ªå‡çº§ç‰ˆçš„æ—¥å¿—ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“(repo)é‡Œé¢æ‰€æœ‰åŠ¨ä½œçš„å†å²ã€‚

```shell
(master)$ git reflog
69204cd HEAD@{0}: checkout: moving from my-branch to master
4e3cd85 HEAD@{1}: commit: foo.txt added
69204cd HEAD@{2}: checkout: moving from master to my-branch
```

æ­£å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥è‡ªåˆ é™¤åˆ†æ”¯çš„æäº¤ hash(commit hash)ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ˜¯å¦èƒ½æ¢å¤åˆ é™¤äº†çš„åˆ†æ”¯ã€‚

```shell
(master)$ git checkout -b my-branch-help
Switched to a new branch 'my-branch-help'
(my-branch-help)$ git reset --hard 4e3cd85
HEAD is now at 4e3cd85 foo.txt added
(my-branch-help)$ ls
README.md foo.txt
```

çœ‹! æˆ‘ä»¬æŠŠåˆ é™¤çš„æ–‡ä»¶æ‰¾å›æ¥äº†ã€‚ Git çš„ `reflog` åœ¨ rebasing å‡ºé”™çš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·æœ‰ç”¨çš„ã€‚

### æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯

åˆ é™¤ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯:

```shell
(master)$ git push origin --delete my-branch
```

ä½ ä¹Ÿå¯ä»¥:

```shell
(master)$ git push origin :my-branch
```

åˆ é™¤ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯:

```shell
(master)$ git branch -D my-branch
```

### æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯

é¦–å…ˆ, ä»è¿œç¨‹æ‹‰å–(fetch) æ‰€æœ‰åˆ†æ”¯:

```shell
(master)$ git fetch --all
```

å‡è®¾ä½ æƒ³è¦ä»è¿œç¨‹çš„`daves`åˆ†æ”¯ç­¾å‡ºåˆ°æœ¬åœ°çš„`daves`

```shell
(master)$ git checkout --track origin/daves
Branch daves set up to track remote branch daves from origin.
Switched to a new branch 'daves'
```

(`--track` æ˜¯ `git checkout -b [branch] [remotename]/[branch]` çš„ç®€å†™)

è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ª`daves`åˆ†æ”¯çš„æœ¬åœ°æ‹·è´, ä»»ä½•æ¨è¿‡(pushed)çš„æ›´æ–°ï¼Œè¿œç¨‹éƒ½èƒ½çœ‹åˆ°.

## æ ‡ç­¾

### æ·»åŠ æ ‡ç­¾

```shell
$ git tag <tag-name>
```

### æ·»åŠ æ ‡ç­¾å¹¶é™„åŠ æ¶ˆæ¯

```shell
$ git tag -a <tag-name>
```

### åˆ é™¤æ ‡ç­¾

```shell
git tag -d <tag_name>
git push <remote> :refs/tags/<tag_name>
```

### æ¢å¤å·²åˆ é™¤æ ‡ç­¾

å¦‚æœä½ æƒ³æ¢å¤ä¸€ä¸ªå·²åˆ é™¤æ ‡ç­¾(tag), å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤: é¦–å…ˆ, éœ€è¦æ‰¾åˆ°æ— æ³•è®¿é—®çš„æ ‡ç­¾(unreachable tag):

```shell
git fsck --unreachable | grep tag
```

è®°ä¸‹è¿™ä¸ªæ ‡ç­¾(tag)çš„ hashï¼Œç„¶åç”¨ Git çš„ [update-ref](http://git-scm.com/docs/git-update-ref):

```shell
git update-ref refs/tags/<tag_name> <hash>
```

è¿™æ—¶ä½ çš„æ ‡ç­¾(tag)åº”è¯¥å·²ç»æ¢å¤äº†ã€‚

## Rebase å’Œ Merge

> merge ä¸ rebase è™½ç„¶æ˜¯ git å¸¸ç”¨åŠŸèƒ½ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨ git å‘½ä»¤æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚
>
> å› ä¸ºå¦‚æœå‡ºç°ä»£ç å†²çªï¼Œåœ¨æ²¡æœ‰ä»£ç æ¯”å¯¹å·¥å…·çš„æƒ…å†µä¸‹ï¼Œå®åœ¨å¤ªè‰°éš¾äº†ã€‚
>
> ä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨å„ç§ Git GUI å·¥å…·ã€‚

### å°†åˆ†æ”¯åˆå¹¶åˆ°å½“å‰ HEAD ä¸­

```bash
git merge <branch>
```

### å°†å½“å‰ HEAD ç‰ˆæœ¬é‡ç½®åˆ°åˆ†æ”¯ä¸­

```bash
git rebase <branch>
```

### æ’¤é”€ rebase/merge

ä½ å¯ä»¥åˆå¹¶(merge)æˆ– rebase äº†ä¸€ä¸ªé”™è¯¯çš„åˆ†æ”¯, æˆ–è€…å®Œæˆä¸äº†ä¸€ä¸ªè¿›è¡Œä¸­çš„ rebase/mergeã€‚ Git åœ¨è¿›è¡Œå±é™©æ“ä½œçš„æ—¶å€™ä¼šæŠŠåŸå§‹çš„ HEAD ä¿å­˜åœ¨ä¸€ä¸ªå« ORIG_HEAD çš„å˜é‡é‡Œ, æ‰€ä»¥è¦æŠŠåˆ†æ”¯æ¢å¤åˆ° rebase/merge å‰çš„çŠ¶æ€æ˜¯å¾ˆå®¹æ˜“çš„ã€‚

```shell
(my-branch)$ git reset --hard ORIG_HEAD
```

### æˆ‘å·²ç» rebase è¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)

ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³æŠŠè¿™äº›å˜åŒ–(changes)ååº”åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œä½ å°±å¿…é¡»å¾—å¼ºæ¨(force push)ã€‚ æ˜¯å› ä½ å¿«è¿›(Fast forward)äº†æäº¤ï¼Œæ”¹å˜äº† Git å†å², è¿œç¨‹åˆ†æ”¯ä¸ä¼šæ¥å—å˜åŒ–(changes)ï¼Œé™¤éå¼ºæ¨(force push)ã€‚è¿™å°±æ˜¯è®¸å¤šäººä½¿ç”¨ merge å·¥ä½œæµ, è€Œä¸æ˜¯ rebasing å·¥ä½œæµçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œ å¼€å‘è€…çš„å¼ºæ¨(force push)ä¼šä½¿å¤§çš„å›¢é˜Ÿé™·å…¥éº»çƒ¦ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œä¸€ç§å®‰å…¨ä½¿ç”¨ rebase çš„æ–¹æ³•æ˜¯ï¼Œä¸è¦æŠŠä½ çš„å˜åŒ–(changes)åæ˜ åˆ°è¿œç¨‹åˆ†æ”¯ä¸Š, è€Œæ˜¯æŒ‰ä¸‹é¢çš„åš:

```shell
(master)$ git checkout my-branch
(my-branch)$ git rebase -i master
(my-branch)$ git checkout master
(master)$ git merge --ff-only my-branch
```

æ›´å¤š, å‚è§ [this SO thread](http://stackoverflow.com/questions/11058312/how-can-i-use-git-rebase-without-requiring-a-forced-push).

### æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)

å‡è®¾ä½ çš„å·¥ä½œåˆ†æ”¯å°†ä¼šåšå¯¹äº `master` çš„ pull-requestã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸å…³å¿ƒæäº¤(commit)çš„æ—¶é—´æˆ³ï¼Œåªæƒ³ç»„åˆ _æ‰€æœ‰_ æäº¤(commit) åˆ°ä¸€ä¸ªå•ç‹¬çš„é‡Œé¢, ç„¶åé‡ç½®(reset)é‡æäº¤(recommit)ã€‚ ç¡®ä¿ä¸»(master)åˆ†æ”¯æ˜¯æœ€æ–°çš„å’Œä½ çš„å˜åŒ–éƒ½å·²ç»æäº¤äº†, ç„¶å:

```shell
(my-branch)$ git reset --soft master
(my-branch)$ git commit -am "New awesome feature"
```

å¦‚æœä½ æƒ³è¦æ›´å¤šçš„æ§åˆ¶, æƒ³è¦ä¿ç•™æ—¶é—´æˆ³, ä½ éœ€è¦åšäº¤äº’å¼ rebase (interactive rebase):

```shell
(my-branch)$ git rebase -i master
```

å¦‚æœæ²¡æœ‰ç›¸å¯¹çš„å…¶å®ƒåˆ†æ”¯ï¼Œ ä½ å°†ä¸å¾—ä¸ç›¸å¯¹è‡ªå·±çš„`HEAD` è¿›è¡Œ rebaseã€‚ ä¾‹å¦‚ï¼šä½ æƒ³ç»„åˆæœ€è¿‘çš„ä¸¤æ¬¡æäº¤(commit), ä½ å°†ç›¸å¯¹äº`HEAD\~2` è¿›è¡Œ rebaseï¼Œ ç»„åˆæœ€è¿‘ 3 æ¬¡æäº¤(commit), ç›¸å¯¹äº`HEAD\~3`, ç­‰ç­‰ã€‚

```shell
(master)$ git rebase -i HEAD~2
```

åœ¨ä½ æ‰§è¡Œäº†äº¤äº’å¼ rebase çš„å‘½ä»¤(interactive rebase command)å, ä½ å°†åœ¨ä½ çš„ç¼–è¾‘å™¨é‡Œçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
pick b729ad5 fixup
pick e3851e8 another fix

## Rebase 8074d12..b729ad5 onto 8074d12
#
## Commands:
##  p, pick = use commit
##  r, reword = use commit, but edit the commit message
##  e, edit = use commit, but stop for amending
##  s, squash = use commit, but meld into previous commit
##  f, fixup = like "squash", but discard this commit's log message
##  x, exec = run command (the rest of the line) using shell
#
## These lines can be re-ordered; they are executed from top to bottom.
#
## If you remove a line here THAT COMMIT WILL BE LOST.
#
## However, if you remove everything, the rebase will be aborted.
#
## Note that empty commits are commented out
```

æ‰€æœ‰ä»¥ `#` å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Š, ä¸ä¼šå½±å“ rebase.

ç„¶åï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä¸Šé¢å‘½ä»¤åˆ—è¡¨çš„å‘½ä»¤æ›¿æ¢ `pick`, ä½ ä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤å¯¹åº”çš„è¡Œæ¥åˆ é™¤ä¸€ä¸ªæäº¤(commit)ã€‚

ä¾‹å¦‚, å¦‚æœä½ æƒ³ **å•ç‹¬ä¿ç•™æœ€æ—§(first)çš„æäº¤(commit),ç»„åˆæ‰€æœ‰å‰©ä¸‹çš„åˆ°ç¬¬äºŒä¸ªé‡Œé¢**, ä½ å°±åº”è¯¥ç¼–è¾‘ç¬¬äºŒä¸ªæäº¤(commit)åé¢çš„æ¯ä¸ªæäº¤(commit) å‰çš„å•è¯ä¸º `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
f b729ad5 fixup
f e3851e8 another fix
```

å¦‚æœä½ æƒ³ç»„åˆè¿™äº›æäº¤(commit) **å¹¶é‡å‘½åè¿™ä¸ªæäº¤(commit)**, ä½ åº”è¯¥åœ¨ç¬¬äºŒä¸ªæäº¤(commit)æ—è¾¹æ·»åŠ ä¸€ä¸ª`r`ï¼Œæˆ–è€…æ›´ç®€å•çš„ç”¨`s` æ›¿ä»£ `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
s b729ad5 fixup
s e3851e8 another fix
```

ä½ å¯ä»¥åœ¨æ¥ä¸‹æ¥å¼¹å‡ºçš„æ–‡æœ¬æç¤ºæ¡†é‡Œé‡å‘½åæäº¤(commit)ã€‚

```vim
Newer, awesomer features

## Please enter the commit message for your changes. Lines starting
## with '#' will be ignored, and an empty message aborts the commit.
## rebase in progress; onto 8074d12
## You are currently editing a commit while rebasing branch 'master' on '8074d12'.
#
## Changes to be committed:
# modified:   README.md
#

```

å¦‚æœæˆåŠŸäº†, ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```shell
(master)$ Successfully rebased and updated refs/heads/master.
```

#### å®‰å…¨åˆå¹¶(merging)ç­–ç•¥

`--no-commit` æ‰§è¡Œåˆå¹¶(merge)ä½†ä¸è‡ªåŠ¨æäº¤, ç»™ç”¨æˆ·åœ¨åšæäº¤å‰æ£€æŸ¥å’Œä¿®æ”¹çš„æœºä¼šã€‚ `no-ff` ä¼šä¸ºç‰¹æ€§åˆ†æ”¯(feature branch)çš„å­˜åœ¨è¿‡ç•™ä¸‹è¯æ®, ä¿æŒé¡¹ç›®å†å²ä¸€è‡´ã€‚

```shell
(master)$ git merge --no-ff --no-commit my-branch
```

#### æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)

```shell
(master)$ git merge --squash my-branch
```

#### æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)

æœ‰æ—¶å€™ï¼Œåœ¨å°†æ•°æ®æ¨å‘ä¸Šæ¸¸ä¹‹å‰ï¼Œä½ æœ‰å‡ ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œæäº¤(commit)ã€‚è¿™æ—¶å€™ä¸å¸Œæœ›æŠŠå·²ç»æ¨(push)è¿‡çš„ç»„åˆè¿›æ¥ï¼Œå› ä¸ºå…¶ä»–äººå¯èƒ½å·²ç»æœ‰æäº¤(commit)å¼•ç”¨å®ƒä»¬äº†ã€‚

```shell
(master)$ git rebase -i @{u}
```

è¿™ä¼šäº§ç”Ÿä¸€æ¬¡äº¤äº’å¼çš„ rebase(interactive rebase), åªä¼šåˆ—å‡ºæ²¡æœ‰æ¨(push)çš„æäº¤(commit)ï¼Œ åœ¨è¿™ä¸ªåˆ—è¡¨æ—¶è¿›è¡Œ reorder/fix/squash éƒ½æ˜¯å®‰å…¨çš„ã€‚

### æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†

æ£€æŸ¥ä¸€ä¸ªåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)æ˜¯å¦éƒ½å·²ç»åˆå¹¶(merge)åˆ°äº†å…¶å®ƒåˆ†æ”¯, ä½ åº”è¯¥åœ¨è¿™äº›åˆ†æ”¯çš„ head(æˆ–ä»»ä½• commits)ä¹‹é—´åšä¸€æ¬¡ diff:

```shell
(master)$ git log --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll
```

è¿™ä¼šå‘Šè¯‰ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯é‡Œæœ‰è€Œå¦ä¸€ä¸ªåˆ†æ”¯æ²¡æœ‰çš„æ‰€æœ‰æäº¤(commit), å’Œåˆ†æ”¯ä¹‹é—´ä¸å…±äº«çš„æäº¤(commit)çš„åˆ—è¡¨ã€‚ å¦ä¸€ä¸ªåšæ³•å¯ä»¥æ˜¯:

```shell
(master)$ git log master ^feature/120-on-scroll --no-merges
```

### äº¤äº’å¼ rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜

#### è¿™ä¸ª rebase ç¼–è¾‘å±å¹•å‡ºç°'noop'

å¦‚æœä½ çœ‹åˆ°çš„æ˜¯è¿™æ ·:

```shell
noop
```

è¿™æ„å‘³ç€ä½  rebase çš„åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯åœ¨åŒä¸€ä¸ªæäº¤(commit)ä¸Š, æˆ–è€… _é¢†å…ˆ(ahead)_ å½“å‰åˆ†æ”¯ã€‚ ä½ å¯ä»¥å°è¯•:

- æ£€æŸ¥ç¡®ä¿ä¸»(master)åˆ†æ”¯æ²¡æœ‰é—®é¢˜
- rebase `HEAD\~2` æˆ–è€…æ›´æ—©

#### æœ‰å†²çªçš„æƒ…å†µ

å¦‚æœä½ ä¸èƒ½æˆåŠŸçš„å®Œæˆ rebase, ä½ å¯èƒ½å¿…é¡»è¦è§£å†³å†²çªã€‚

é¦–å…ˆæ‰§è¡Œ `git status` æ‰¾å‡ºå“ªäº›æ–‡ä»¶æœ‰å†²çª:

```shell
(my-branch)$ git status
On branch my-branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

  modified:   README.md
```

åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢, `README.md` æœ‰å†²çªã€‚ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```vim
   <<<<<<< HEAD
   some code
   =========
   some code
   >>>>>>> new-commit
```

ä½ éœ€è¦è§£å†³æ–°æäº¤çš„ä»£ç (ç¤ºä¾‹é‡Œ, ä»ä¸­é—´`==`çº¿åˆ°`new-commit`çš„åœ°æ–¹)ä¸`HEAD` ä¹‹é—´ä¸ä¸€æ ·çš„åœ°æ–¹.

æœ‰æ—¶å€™è¿™äº›åˆå¹¶éå¸¸å¤æ‚ï¼Œä½ åº”è¯¥ä½¿ç”¨å¯è§†åŒ–çš„å·®å¼‚ç¼–è¾‘å™¨(visual diff editor):

```shell
(master*)$ git mergetool -t opendiff
```

åœ¨ä½ è§£å†³å®Œæ‰€æœ‰å†²çªå’Œæµ‹è¯•è¿‡å, `git add` å˜åŒ–äº†çš„(changed)æ–‡ä»¶, ç„¶åç”¨`git rebase --continue` ç»§ç»­ rebaseã€‚

```shell
(my-branch)$ git add README.md
(my-branch)$ git rebase --continue
```

å¦‚æœåœ¨è§£å†³å®Œæ‰€æœ‰çš„å†²çªè¿‡åï¼Œå¾—åˆ°äº†ä¸æäº¤å‰ä¸€æ ·çš„ç»“æœ, å¯ä»¥æ‰§è¡Œ`git rebase --skip`ã€‚

ä»»ä½•æ—¶å€™ä½ æƒ³ç»“æŸæ•´ä¸ª rebase è¿‡ç¨‹ï¼Œå›æ¥ rebase å‰çš„åˆ†æ”¯çŠ¶æ€, ä½ å¯ä»¥åš:

```shell
(my-branch)$ git rebase --abort
```

## æŸ¥çœ‹ä¿¡æ¯

æ˜¾ç¤ºå·¥ä½œè·¯å¾„ä¸‹å·²ä¿®æ”¹çš„æ–‡ä»¶ï¼š`git status`

æ˜¾ç¤ºä¸ä¸Šæ¬¡æäº¤ç‰ˆæœ¬æ–‡ä»¶çš„ä¸åŒï¼š`git diff`

æ˜¾ç¤ºæäº¤å†å²ï¼š

```shell
# ä»æœ€æ–°æäº¤å¼€å§‹ï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„æäº¤è®°å½•ï¼ˆæ˜¾ç¤ºhashï¼Œ ä½œè€…ä¿¡æ¯ï¼Œæäº¤çš„æ ‡é¢˜å’Œæ—¶é—´ï¼‰
$ git log

# æ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„æ‰€æœ‰æäº¤
$ git log --author="username"

# æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰ä¿®æ”¹
$ git log -p <file>
```

æ˜¾ç¤ºæœç´¢å†…å®¹ï¼š

```shell
# ä»å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ä¸­æŸ¥æ‰¾æ–‡æœ¬å†…å®¹
$ git grep "Hello"

# åœ¨æŸä¸€ç‰ˆæœ¬ä¸­æœç´¢æ–‡æœ¬
$ git grep "Hello" v2.5
```

## å…¶ä»–

### å…‹éš†æ‰€æœ‰å­æ¨¡å—

```shell
git clone --recursive git://github.com/foo/bar.git
```

å¦‚æœå·²ç»å…‹éš†äº†:

```shell
git submodule update --init --recursive
```

### å·²åˆ é™¤è¡¥ä¸(patch)

å¦‚æœæŸäººåœ¨ GitHub ä¸Šç»™ä½ å‘äº†ä¸€ä¸ª pull request, ä½†æ˜¯ç„¶åä»–åˆ é™¤äº†ä»–è‡ªå·±çš„åŸå§‹ fork, ä½ å°†æ²¡æ³•å…‹éš†ä»–ä»¬çš„æäº¤(commit)æˆ–ä½¿ç”¨ `git am`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, æœ€å¥½æ‰‹åŠ¨çš„æŸ¥çœ‹ä»–ä»¬çš„æäº¤(commit)ï¼Œå¹¶æŠŠå®ƒä»¬æ‹·è´åˆ°ä¸€ä¸ªæœ¬åœ°æ–°åˆ†æ”¯ï¼Œç„¶ååšæäº¤ã€‚

åšå®Œæäº¤å, å†ä¿®æ”¹ä½œè€…ï¼Œå‚è§[å˜æ›´ä½œè€…](#commit-wrong-author)ã€‚ ç„¶å, åº”ç”¨å˜åŒ–, å†å‘èµ·ä¸€ä¸ªæ–°çš„ pull requestã€‚

## è·Ÿè¸ªæ–‡ä»¶(Tracking Files)

### æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹

```shell
(master)$ git mv --force myfile MyFile
```

### æˆ‘æƒ³ä» Git åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶

```shell
(master)$ git rm --cached log.txt
```

## Fork é¡¹ç›®

GitHub ä¸­ Fork æ˜¯ æœåŠ¡ç«¯çš„ä»£ç ä»“åº“å…‹éš†ï¼ˆå³ æ–°å…‹éš†å‡ºæ¥çš„ä»£ç ä»“åº“åœ¨è¿œç¨‹æœåŠ¡ç«¯ï¼‰ï¼ŒåŒ…å«äº†åŸæ¥çš„ä»“åº“ï¼ˆå³ upstream repositoryï¼Œä¸Šæ¸¸ä»“åº“ï¼‰æ‰€æœ‰å†…å®¹ï¼Œå¦‚åˆ†æ”¯ã€Tagã€æäº¤ã€‚ä»£ç æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚ Githubã€BitBucketï¼‰æä¾›äº†æ–¹ä¾¿çš„å®Œæˆ Fork æ“ä½œçš„åŠŸèƒ½ï¼ˆåœ¨ä»“åº“é¡µé¢ç‚¹ä¸€ä¸‹ Fork æŒ‰é’®ï¼‰ã€‚è¿™æ ·æœ‰äº†ä¸€ä¸ªä½ è‡ªå·±çš„å¯ä»¥è‡ªç”±æäº¤çš„è¿œç¨‹ä»“åº“ï¼Œç„¶åå¯ä»¥é€šè¿‡çš„ Pull Request æŠŠä½ çš„æäº¤è´¡çŒ®å› åŸä»“åº“ã€‚è€Œå¯¹äºåŸä»“åº“ Owner æ¥è¯´ï¼Œé¼“åŠ±åˆ«äºº Fork è‡ªå·±çš„ä»“åº“ï¼Œé€šè¿‡ Pull Request ç»™è‡ªå·±çš„ä»“åº“åšè´¡çŒ®ï¼Œä¹Ÿèƒ½æé«˜äº†è‡ªå·±ä»“åº“çš„çŸ¥ååº¦ã€‚

> å‚è€ƒï¼š[Fork a repo](https://docs.github.com/en/github/getting-started-with-github/fork-a-repo)

ï¼ˆ1ï¼‰æ‰§è¡Œ `git remote -v`ï¼Œæ‚¨å°†çœ‹åˆ°å½“å‰ä¸º fork é…ç½®çš„è¿œç¨‹å­˜å‚¨åº“ã€‚

ï¼ˆ2ï¼‰æ·»åŠ ä¸Šæ¸¸é¡¹ç›®çš„ä»“åº“åœ°å€

```shell
git remote add upstream <githubä»“åº“åœ°å€>
```

ï¼ˆ3ï¼‰ç¡®è®¤æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œå†æ¬¡é”®å…¥ `git remote -v`ã€‚

ï¼ˆ4ï¼‰è·å–ä¸Šæ¸¸é¡¹ç›®æ›´æ–°ï¼Œå¯ä»¥æ‰§è¡Œ `git fetch upstream`

ï¼ˆ5ï¼‰åŒæ­¥ä¸Šæ¸¸é¡¹ç›®çš„ä»£ç åˆ°æ–°ä»“åº“

```shell
# merge
git merge upstream/master
# rebase
git rebase upstream/master origin/master
```

## æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ

ä½ æŠŠäº‹æƒ…æç ¸äº†ï¼šä½  `é‡ç½®(reset)` äº†ä¸€äº›ä¸œè¥¿, æˆ–è€…ä½ åˆå¹¶äº†é”™è¯¯çš„åˆ†æ”¯, äº¦æˆ–ä½ å¼ºæ¨äº†åæ‰¾ä¸åˆ°ä½ è‡ªå·±çš„æäº¤(commit)äº†ã€‚æœ‰äº›æ—¶å€™, ä½ ä¸€ç›´éƒ½åšå¾—å¾ˆå¥½, ä½†ä½ æƒ³å›åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€ã€‚

è¿™å°±æ˜¯ `git reflog` çš„ç›®çš„ï¼Œ `reflog` è®°å½•å¯¹åˆ†æ”¯é¡¶ç«¯(the tip of a branch)çš„ä»»ä½•æ”¹å˜, å³ä½¿é‚£ä¸ªé¡¶ç«¯æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ ‡ç­¾å¼•ç”¨ã€‚åŸºæœ¬ä¸Š, æ¯æ¬¡ HEAD çš„æ”¹å˜, ä¸€æ¡æ–°çš„è®°å½•å°±ä¼šå¢åŠ åˆ°`reflog`ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™åªå¯¹æœ¬åœ°åˆ†æ”¯èµ·ä½œç”¨ï¼Œä¸”å®ƒåªè·Ÿè¸ªåŠ¨ä½œ (ä¾‹å¦‚ï¼Œä¸ä¼šè·Ÿè¸ªä¸€ä¸ªæ²¡æœ‰è¢«è®°å½•çš„æ–‡ä»¶çš„ä»»ä½•æ”¹å˜)ã€‚

```shell
(master)$ git reflog
0a2e358 HEAD@{0}: reset: moving to HEAD\~2
0254ea7 HEAD@{1}: checkout: moving from 2.2 to master
c10f740 HEAD@{2}: checkout: moving from master to 2.2
```

ä¸Šé¢çš„ reflog å±•ç¤ºäº†ä» master åˆ†æ”¯ç­¾å‡º(checkout)åˆ° 2.2 åˆ†æ”¯ï¼Œç„¶åå†ç­¾å›ã€‚ é‚£é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªç¡¬é‡ç½®(hard reset)åˆ°ä¸€ä¸ªè¾ƒæ—§çš„æäº¤ã€‚æœ€æ–°çš„åŠ¨ä½œå‡ºç°åœ¨æœ€ä¸Šé¢ä»¥ `HEAD@{0}`æ ‡è¯†.

å¦‚æœäº‹å®è¯æ˜ä½ ä¸å°å¿ƒå›ç§»(move back)äº†æäº¤(commit), reflog ä¼šåŒ…å«ä½ ä¸å°å¿ƒå›ç§»å‰ master ä¸ŠæŒ‡å‘çš„æäº¤(0254ea7)ã€‚

```shell
git reset --hard 0254ea7
```

ç„¶åä½¿ç”¨ git reset å°±å¯ä»¥æŠŠ master æ”¹å›åˆ°ä¹‹å‰çš„ commitï¼Œè¿™æä¾›äº†ä¸€ä¸ªåœ¨å†å²è¢«æ„å¤–æ›´æ”¹æƒ…å†µä¸‹çš„å®‰å…¨ç½‘ã€‚

## ğŸ“š èµ„æ–™

- **å®˜æ–¹èµ„æº**
  - [Git å®˜ç½‘](https://git-scm.com/)
  - [Git Github](https://github.com/git/git)
  - [Github å®˜æ–¹æ•™ç¨‹](https://guides.github.com/)
- **æ¨¡æ¿**
  - [gitignore æ¨¡æ¿](https://github.com/github/gitignore) - .gitignore æ–‡ä»¶æ¨¡æ¿
  - [gitattributes æ¨¡æ¿](https://github.com/alexkaratarakis/gitattributes) - .gitattributes æ–‡ä»¶æ¨¡æ¿
  - [github-cheat-sheet](https://github.com/tiimgreen/github-cheat-sheet) - git å‘½ä»¤ç®€ç•¥å›¾è¡¨
- **Git æ•™ç¨‹**
  - [Learn Git branching](https://learngitbranching.js.org/) - äº¤äº’å¼æ•™ç¨‹
  - [Git å®˜æ–¹æ¨èæ•™ç¨‹](https://git-scm.com/book/zh/v2) - Scott Chacon çš„ Git ä¹¦ã€‚
    - [git-flight-rules](https://github.com/k88hudson/git-flight-rules)
  - [git-tips](https://github.com/521xueweihan/git-tips)
  - [Git ä¸­æ–‡æ•™ç¨‹](https://github.com/geeeeeeeeek/git-recipes)
  - [å»–é›ªå³°çš„ Git æ•™ç¨‹](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)
  - [æœ‰å…³ git çš„å­¦ä¹ èµ„æº](https://github.com/xirong/my-git)
- **æ–‡ç« **
  - [Git Cookbook](https://github.com/k88hudson/git-flight-rules/blob/master/README_zh-CN.md)
  - [Git å¥‡æŠ€æ·«å·§](https://github.com/521xueweihan/git-tips)
  - [Git é£æ ¼æŒ‡å—](https://github.com/aseaday/git-style-guide)
  - [Git åœ¨å›¢é˜Ÿä¸­çš„æœ€ä½³å®è·µ--å¦‚ä½•æ­£ç¡®ä½¿ç”¨ Git Flow](http://www.cnblogs.com/cnblogsfans/p/5075073.html)
  - [Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)
- **Git å·¥å…·**
  - [guis](https://git-scm.com/downloads/guis) - Git å®˜ç½‘å±•ç¤ºçš„å®¢æˆ·ç«¯å·¥å…·åˆ—è¡¨ã€‚
  - [gogs](https://github.com/gogits/gogs) - ææ˜“æ­å»ºçš„è‡ªåŠ© Git æœåŠ¡ã€‚
  - [gitflow](https://github.com/nvie/gitflow) - åº”ç”¨ [fit-flow](http://nvie.com/posts/a-successful-git-branching-model/) æ¨¡å‹çš„å·¥å…·ã€‚
  - [firstaidgit.io](http://firstaidgit.io/) ä¸€ä¸ªå¯æœç´¢çš„æœ€å¸¸è¢«é—®åˆ°çš„ Git çš„é—®é¢˜
  - [git-extra-commands](https://github.com/unixorn/git-extra-commands) - ä¸€å †æœ‰ç”¨çš„é¢å¤–çš„ Git è„šæœ¬
  - [git-extras](https://github.com/tj/git-extras) - GIT å·¥å…·é›† -- repo summary, repl, changelog population, author commit percentages and more
  - [git-fire](https://github.com/qw3rtman/git-fire) - git-fire æ˜¯ä¸€ä¸ª Git æ’ä»¶ï¼Œç”¨äºå¸®åŠ©åœ¨ç´§æ€¥æƒ…å†µä¸‹æ·»åŠ æ‰€æœ‰å½“å‰æ–‡ä»¶, åšæäº¤(committing), å’Œæ¨(push)åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯(é˜»æ­¢åˆå¹¶å†²çª)ã€‚
  - [git-tips](https://github.com/git-tips/tips) - Git å°æç¤º
  - [git-town](https://github.com/Originate/git-town) - é€šç”¨ï¼Œé«˜çº§ Git å·¥ä½œæµæ”¯æŒï¼
- **GUI å®¢æˆ·ç«¯**
  - [GitKraken](https://www.gitkraken.com/) - è±ªåçš„ Git å®¢æˆ·ç«¯ Windows, Mac & Linux
  - [git-cola](https://git-cola.github.io/) - å¦å¤–ä¸€ä¸ª Git å®¢æˆ·ç«¯ Windows & OS X
  - [GitUp](https://github.com/git-up/GitUp) - ä¸€ä¸ªæ–°çš„ Git å®¢æˆ·ç«¯ï¼Œåœ¨å¤„ç† Git çš„å¤æ‚æ€§ä¸Šæœ‰è‡ªå·±çš„ç‰¹ç‚¹
  - [gitx-dev](https://rowanj.github.io/gitx/) - å›¾å½¢åŒ–çš„ Git å®¢æˆ·ç«¯ OS X
  - [Source Tree](https://www.sourcetreeapp.com/) - å…è´¹çš„å›¾å½¢åŒ– Git å®¢æˆ·ç«¯ Windows & OS X
  - [Tower](http://www.git-tower.com/) - å›¾å½¢åŒ– Git å®¢æˆ·ç«¯ OS X(ä»˜è´¹)
- **git cheat sheet**
  - [github-git-cheat-sheet](https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf)